import{r as x,c as he,d as xe,o as ke,w as ze,a as Se,b as F,e as M,f as v,g as Ie,h as Oe,v as Fe,u as C,i as Me,j as oe,t as L,F as Ce,k as Ve,l as Ee,m as Le}from"./vue-3B7Upzk0.js";import{o as je}from"../runtime/index.js";import"./supabase-CjkNZD6A.js";function A(n,e,t,s){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function c(d){try{l(s.next(d))}catch(h){r(h)}}function a(d){try{l(s.throw(d))}catch(h){r(h)}}function l(d){d.done?o(d.value):i(d.value).then(c,a)}l((s=s.apply(n,[])).next())})}const Te="ENTRIES",fe="KEYS",me="VALUES",w="";class q{constructor(e,t){const s=e._tree,i=Array.from(s.keys());this.set=e,this._type=t,this._path=i.length>0?[{node:s,keys:i}]:[]}next(){const e=this.dive();return this.backtrack(),e}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:e,keys:t}=S(this._path);if(S(t)===w)return{done:!1,value:this.result()};const s=e.get(S(t));return this._path.push({node:s,keys:Array.from(s.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const e=S(this._path).keys;e.pop(),!(e.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:e})=>S(e)).filter(e=>e!==w).join("")}value(){return S(this._path).node.get(w)}result(){switch(this._type){case me:return this.value();case fe:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const S=n=>n[n.length-1],De=(n,e,t)=>{const s=new Map;if(e===void 0)return s;const i=e.length+1,o=i+t,r=new Uint8Array(o*i).fill(t+1);for(let c=0;c<i;++c)r[c]=c;for(let c=1;c<o;++c)r[c*i]=c;return ge(n,e,t,s,r,1,i,""),s},ge=(n,e,t,s,i,o,r,c)=>{const a=o*r;e:for(const l of n.keys())if(l===w){const d=i[a-1];d<=t&&s.set(c,[n.get(l),d])}else{let d=o;for(let h=0;h<l.length;++h,++d){const u=l[h],m=r*d,p=m-r;let f=i[m];const g=Math.max(0,d-t-1),y=Math.min(r-1,d+t);for(let _=g;_<y;++_){const W=u!==e[_],P=i[p+_]+ +W,E=i[p+_+1]+1,z=i[m+_]+1,O=i[m+_+1]=Math.min(P,E,z);O<f&&(f=O)}if(f>t)continue e}ge(n.get(l),e,t,s,i,d,r,c+l)}};class b{constructor(e=new Map,t=""){this._size=void 0,this._tree=e,this._prefix=t}atPrefix(e){if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");const[t,s]=N(this._tree,e.slice(this._prefix.length));if(t===void 0){const[i,o]=te(s);for(const r of i.keys())if(r!==w&&r.startsWith(o)){const c=new Map;return c.set(r.slice(o.length),i.get(r)),new b(c,e)}}return new b(t,e)}clear(){this._size=void 0,this._tree.clear()}delete(e){return this._size=void 0,Ae(this._tree,e)}entries(){return new q(this,Te)}forEach(e){for(const[t,s]of this)e(t,s,this)}fuzzyGet(e,t){return De(this._tree,e,t)}get(e){const t=G(this._tree,e);return t!==void 0?t.get(w):void 0}has(e){const t=G(this._tree,e);return t!==void 0&&t.has(w)}keys(){return new q(this,fe)}set(e,t){if(typeof e!="string")throw new Error("key must be a string");return this._size=void 0,J(this._tree,e).set(w,t),this}get size(){if(this._size)return this._size;this._size=0;const e=this.entries();for(;!e.next().done;)this._size+=1;return this._size}update(e,t){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const s=J(this._tree,e);return s.set(w,t(s.get(w))),this}fetch(e,t){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const s=J(this._tree,e);let i=s.get(w);return i===void 0&&s.set(w,i=t()),i}values(){return new q(this,me)}[Symbol.iterator](){return this.entries()}static from(e){const t=new b;for(const[s,i]of e)t.set(s,i);return t}static fromObject(e){return b.from(Object.entries(e))}}const N=(n,e,t=[])=>{if(e.length===0||n==null)return[n,t];for(const s of n.keys())if(s!==w&&e.startsWith(s))return t.push([n,s]),N(n.get(s),e.slice(s.length),t);return t.push([n,e]),N(void 0,"",t)},G=(n,e)=>{if(e.length===0||n==null)return n;for(const t of n.keys())if(t!==w&&e.startsWith(t))return G(n.get(t),e.slice(t.length))},J=(n,e)=>{const t=e.length;e:for(let s=0;n&&s<t;){for(const o of n.keys())if(o!==w&&e[s]===o[0]){const r=Math.min(t-s,o.length);let c=1;for(;c<r&&e[s+c]===o[c];)++c;const a=n.get(o);if(c===o.length)n=a;else{const l=new Map;l.set(o.slice(c),a),n.set(e.slice(s,s+c),l),n.delete(o),n=l}s+=c;continue e}const i=new Map;return n.set(e.slice(s),i),i}return n},Ae=(n,e)=>{const[t,s]=N(n,e);if(t!==void 0){if(t.delete(w),t.size===0)pe(s);else if(t.size===1){const[i,o]=t.entries().next().value;we(s,i,o)}}},pe=n=>{if(n.length===0)return;const[e,t]=te(n);if(e.delete(t),e.size===0)pe(n.slice(0,-1));else if(e.size===1){const[s,i]=e.entries().next().value;s!==w&&we(n.slice(0,-1),s,i)}},we=(n,e,t)=>{if(n.length===0)return;const[s,i]=te(n);s.set(i+e,t),s.delete(i)},te=n=>n[n.length-1],se="or",_e="and",$e="and_not";class I{constructor(e){if((e==null?void 0:e.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');const t=e.autoVacuum==null||e.autoVacuum===!0?Q:e.autoVacuum;this._options=Object.assign(Object.assign(Object.assign({},U),e),{autoVacuum:t,searchOptions:Object.assign(Object.assign({},re),e.searchOptions||{}),autoSuggestOptions:Object.assign(Object.assign({},qe),e.autoSuggestOptions||{})}),this._index=new b,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=H,this.addFields(this._options.fields)}add(e){const{extractField:t,tokenize:s,processTerm:i,fields:o,idField:r}=this._options,c=t(e,r);if(c==null)throw new Error(`MiniSearch: document does not have ID field "${r}"`);if(this._idToShortId.has(c))throw new Error(`MiniSearch: duplicate ID ${c}`);const a=this.addDocumentId(c);this.saveStoredFields(a,e);for(const l of o){const d=t(e,l);if(d==null)continue;const h=s(d.toString(),l),u=this._fieldIds[l],m=new Set(h).size;this.addFieldLength(a,u,this._documentCount-1,m);for(const p of h){const f=i(p,l);if(Array.isArray(f))for(const g of f)this.addTerm(u,a,g);else f&&this.addTerm(u,a,f)}}}addAll(e){for(const t of e)this.add(t)}addAllAsync(e,t={}){const{chunkSize:s=10}=t,i={chunk:[],promise:Promise.resolve()},{chunk:o,promise:r}=e.reduce(({chunk:c,promise:a},l,d)=>(c.push(l),(d+1)%s===0?{chunk:[],promise:a.then(()=>new Promise(h=>setTimeout(h,0))).then(()=>this.addAll(c))}:{chunk:c,promise:a}),i);return r.then(()=>this.addAll(o))}remove(e){const{tokenize:t,processTerm:s,extractField:i,fields:o,idField:r}=this._options,c=i(e,r);if(c==null)throw new Error(`MiniSearch: document does not have ID field "${r}"`);const a=this._idToShortId.get(c);if(a==null)throw new Error(`MiniSearch: cannot remove document with ID ${c}: it is not in the index`);for(const l of o){const d=i(e,l);if(d==null)continue;const h=t(d.toString(),l),u=this._fieldIds[l],m=new Set(h).size;this.removeFieldLength(a,u,this._documentCount,m);for(const p of h){const f=s(p,l);if(Array.isArray(f))for(const g of f)this.removeTerm(u,a,g);else f&&this.removeTerm(u,a,f)}}this._storedFields.delete(a),this._documentIds.delete(a),this._idToShortId.delete(c),this._fieldLength.delete(a),this._documentCount-=1}removeAll(e){if(e)for(const t of e)this.remove(t);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new b,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(e){const t=this._idToShortId.get(e);if(t==null)throw new Error(`MiniSearch: cannot discard document with ID ${e}: it is not in the index`);this._idToShortId.delete(e),this._documentIds.delete(t),this._storedFields.delete(t),(this._fieldLength.get(t)||[]).forEach((s,i)=>{this.removeFieldLength(t,i,this._documentCount,s)}),this._fieldLength.delete(t),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:e,minDirtCount:t,batchSize:s,batchWait:i}=this._options.autoVacuum;this.conditionalVacuum({batchSize:s,batchWait:i},{minDirtCount:t,minDirtFactor:e})}discardAll(e){const t=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const s of e)this.discard(s)}finally{this._options.autoVacuum=t}this.maybeAutoVacuum()}replace(e){const{idField:t,extractField:s}=this._options,i=s(e,t);this.discard(i),this.add(e)}vacuum(e={}){return this.conditionalVacuum(e)}conditionalVacuum(e,t){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&t,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const s=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=H,this.performVacuuming(e,s)}),this._enqueuedVacuum)):this.vacuumConditionsMet(t)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(e),this._currentVacuum)}performVacuuming(e,t){return A(this,void 0,void 0,function*(){const s=this._dirtCount;if(this.vacuumConditionsMet(t)){const i=e.batchSize||Z.batchSize,o=e.batchWait||Z.batchWait;let r=1;for(const[c,a]of this._index){for(const[l,d]of a)for(const[h]of d)this._documentIds.has(h)||(d.size<=1?a.delete(l):d.delete(h));this._index.get(c).size===0&&this._index.delete(c),r%i===0&&(yield new Promise(l=>setTimeout(l,o))),r+=1}this._dirtCount-=s}yield null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null})}vacuumConditionsMet(e){if(e==null)return!0;let{minDirtCount:t,minDirtFactor:s}=e;return t=t||Q.minDirtCount,s=s||Q.minDirtFactor,this.dirtCount>=t&&this.dirtFactor>=s}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(e){return this._idToShortId.has(e)}getStoredFields(e){const t=this._idToShortId.get(e);if(t!=null)return this._storedFields.get(t)}search(e,t={}){const s=this.executeQuery(e,t),i=[];for(const[o,{score:r,terms:c,match:a}]of s){const l=c.length||1,d={id:this._documentIds.get(o),score:r*l,terms:Object.keys(a),queryTerms:c,match:a};Object.assign(d,this._storedFields.get(o)),(t.filter==null||t.filter(d))&&i.push(d)}return e===I.wildcard&&t.boostDocument==null&&this._options.searchOptions.boostDocument==null||i.sort(ae),i}autoSuggest(e,t={}){t=Object.assign(Object.assign({},this._options.autoSuggestOptions),t);const s=new Map;for(const{score:o,terms:r}of this.search(e,t)){const c=r.join(" "),a=s.get(c);a!=null?(a.score+=o,a.count+=1):s.set(c,{score:o,terms:r,count:1})}const i=[];for(const[o,{score:r,terms:c,count:a}]of s)i.push({suggestion:o,terms:c,score:r/a});return i.sort(ae),i}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(e,t){if(t==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(e),t)}static loadJSONAsync(e,t){return A(this,void 0,void 0,function*(){if(t==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(e),t)})}static getDefault(e){if(U.hasOwnProperty(e))return B(U,e);throw new Error(`MiniSearch: unknown option "${e}"`)}static loadJS(e,t){const{index:s,documentIds:i,fieldLength:o,storedFields:r,serializationVersion:c}=e,a=this.instantiateMiniSearch(e,t);a._documentIds=j(i),a._fieldLength=j(o),a._storedFields=j(r);for(const[l,d]of a._documentIds)a._idToShortId.set(d,l);for(const[l,d]of s){const h=new Map;for(const u of Object.keys(d)){let m=d[u];c===1&&(m=m.ds),h.set(parseInt(u,10),j(m))}a._index.set(l,h)}return a}static loadJSAsync(e,t){return A(this,void 0,void 0,function*(){const{index:s,documentIds:i,fieldLength:o,storedFields:r,serializationVersion:c}=e,a=this.instantiateMiniSearch(e,t);a._documentIds=yield T(i),a._fieldLength=yield T(o),a._storedFields=yield T(r);for(const[d,h]of a._documentIds)a._idToShortId.set(h,d);let l=0;for(const[d,h]of s){const u=new Map;for(const m of Object.keys(h)){let p=h[m];c===1&&(p=p.ds),u.set(parseInt(m,10),yield T(p))}++l%1e3===0&&(yield ye(0)),a._index.set(d,u)}return a})}static instantiateMiniSearch(e,t){const{documentCount:s,nextId:i,fieldIds:o,averageFieldLength:r,dirtCount:c,serializationVersion:a}=e;if(a!==1&&a!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const l=new I(t);return l._documentCount=s,l._nextId=i,l._idToShortId=new Map,l._fieldIds=o,l._avgFieldLength=r,l._dirtCount=c||0,l._index=new b,l}executeQuery(e,t={}){if(e===I.wildcard)return this.executeWildcardQuery(t);if(typeof e!="string"){const u=Object.assign(Object.assign(Object.assign({},t),e),{queries:void 0}),m=e.queries.map(p=>this.executeQuery(p,u));return this.combineResults(m,u.combineWith)}const{tokenize:s,processTerm:i,searchOptions:o}=this._options,r=Object.assign(Object.assign({tokenize:s,processTerm:i},o),t),{tokenize:c,processTerm:a}=r,h=c(e).flatMap(u=>a(u)).filter(u=>!!u).map(Pe(r)).map(u=>this.executeQuerySpec(u,r));return this.combineResults(h,r.combineWith)}executeQuerySpec(e,t){const s=Object.assign(Object.assign({},this._options.searchOptions),t),i=(s.fields||this._options.fields).reduce((f,g)=>Object.assign(Object.assign({},f),{[g]:B(s.boost,g)||1}),{}),{boostDocument:o,weights:r,maxFuzzy:c,bm25:a}=s,{fuzzy:l,prefix:d}=Object.assign(Object.assign({},re.weights),r),h=this._index.get(e.term),u=this.termResults(e.term,e.term,1,e.termBoost,h,i,o,a);let m,p;if(e.prefix&&(m=this._index.atPrefix(e.term)),e.fuzzy){const f=e.fuzzy===!0?.2:e.fuzzy,g=f<1?Math.min(c,Math.round(e.term.length*f)):f;g&&(p=this._index.fuzzyGet(e.term,g))}if(m)for(const[f,g]of m){const y=f.length-e.term.length;if(!y)continue;p==null||p.delete(f);const _=d*f.length/(f.length+.3*y);this.termResults(e.term,f,_,e.termBoost,g,i,o,a,u)}if(p)for(const f of p.keys()){const[g,y]=p.get(f);if(!y)continue;const _=l*f.length/(f.length+y);this.termResults(e.term,f,_,e.termBoost,g,i,o,a,u)}return u}executeWildcardQuery(e){const t=new Map,s=Object.assign(Object.assign({},this._options.searchOptions),e);for(const[i,o]of this._documentIds){const r=s.boostDocument?s.boostDocument(o,"",this._storedFields.get(i)):1;t.set(i,{score:r,terms:[],match:{}})}return t}combineResults(e,t=se){if(e.length===0)return new Map;const s=t.toLowerCase(),i=Ne[s];if(!i)throw new Error(`Invalid combination operator: ${t}`);return e.reduce(i)||new Map}toJSON(){const e=[];for(const[t,s]of this._index){const i={};for(const[o,r]of s)i[o]=Object.fromEntries(r);e.push([t,i])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:e,serializationVersion:2}}termResults(e,t,s,i,o,r,c,a,l=new Map){if(o==null)return l;for(const d of Object.keys(r)){const h=r[d],u=this._fieldIds[d],m=o.get(u);if(m==null)continue;let p=m.size;const f=this._avgFieldLength[u];for(const g of m.keys()){if(!this._documentIds.has(g)){this.removeTerm(u,g,t),p-=1;continue}const y=c?c(this._documentIds.get(g),t,this._storedFields.get(g)):1;if(!y)continue;const _=m.get(g),W=this._fieldLength.get(g)[u],P=We(_,p,this._documentCount,W,f,a),E=s*i*h*y*P,z=l.get(g);if(z){z.score+=E,Je(z.terms,e);const O=B(z.match,t);O?O.push(d):z.match[t]=[d]}else l.set(g,{score:E,terms:[e],match:{[t]:[d]}})}}return l}addTerm(e,t,s){const i=this._index.fetch(s,le);let o=i.get(e);if(o==null)o=new Map,o.set(t,1),i.set(e,o);else{const r=o.get(t);o.set(t,(r||0)+1)}}removeTerm(e,t,s){if(!this._index.has(s)){this.warnDocumentChanged(t,e,s);return}const i=this._index.fetch(s,le),o=i.get(e);o==null||o.get(t)==null?this.warnDocumentChanged(t,e,s):o.get(t)<=1?o.size<=1?i.delete(e):o.delete(t):o.set(t,o.get(t)-1),this._index.get(s).size===0&&this._index.delete(s)}warnDocumentChanged(e,t,s){for(const i of Object.keys(this._fieldIds))if(this._fieldIds[i]===t){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(e)} has changed before removal: term "${s}" was not present in field "${i}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(e){const t=this._nextId;return this._idToShortId.set(e,t),this._documentIds.set(t,e),this._documentCount+=1,this._nextId+=1,t}addFields(e){for(let t=0;t<e.length;t++)this._fieldIds[e[t]]=t}addFieldLength(e,t,s,i){let o=this._fieldLength.get(e);o==null&&this._fieldLength.set(e,o=[]),o[t]=i;const c=(this._avgFieldLength[t]||0)*s+i;this._avgFieldLength[t]=c/(s+1)}removeFieldLength(e,t,s,i){if(s===1){this._avgFieldLength[t]=0;return}const o=this._avgFieldLength[t]*s-i;this._avgFieldLength[t]=o/(s-1)}saveStoredFields(e,t){const{storeFields:s,extractField:i}=this._options;if(s==null||s.length===0)return;let o=this._storedFields.get(e);o==null&&this._storedFields.set(e,o={});for(const r of s){const c=i(t,r);c!==void 0&&(o[r]=c)}}}I.wildcard=Symbol("*");const B=(n,e)=>Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0,Ne={[se]:(n,e)=>{for(const t of e.keys()){const s=n.get(t);if(s==null)n.set(t,e.get(t));else{const{score:i,terms:o,match:r}=e.get(t);s.score=s.score+i,s.match=Object.assign(s.match,r),ce(s.terms,o)}}return n},[_e]:(n,e)=>{const t=new Map;for(const s of e.keys()){const i=n.get(s);if(i==null)continue;const{score:o,terms:r,match:c}=e.get(s);ce(i.terms,r),t.set(s,{score:i.score+o,terms:i.terms,match:Object.assign(i.match,c)})}return t},[$e]:(n,e)=>{for(const t of e.keys())n.delete(t);return n}},Re={k:1.2,b:.7,d:.5},We=(n,e,t,s,i,o)=>{const{k:r,b:c,d:a}=o;return Math.log(1+(t-e+.5)/(e+.5))*(a+n*(r+1)/(n+r*(1-c+c*s/i)))},Pe=n=>(e,t,s)=>{const i=typeof n.fuzzy=="function"?n.fuzzy(e,t,s):n.fuzzy||!1,o=typeof n.prefix=="function"?n.prefix(e,t,s):n.prefix===!0,r=typeof n.boostTerm=="function"?n.boostTerm(e,t,s):1;return{term:e,fuzzy:i,prefix:o,termBoost:r}},U={idField:"id",extractField:(n,e)=>n[e],tokenize:n=>n.split(Be),processTerm:n=>n.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(n,e)=>{typeof(console==null?void 0:console[n])=="function"&&console[n](e)},autoVacuum:!0},re={combineWith:se,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:Re},qe={combineWith:_e,prefix:(n,e,t)=>e===t.length-1},Z={batchSize:1e3,batchWait:10},H={minDirtFactor:.1,minDirtCount:20},Q=Object.assign(Object.assign({},Z),H),Je=(n,e)=>{n.includes(e)||n.push(e)},ce=(n,e)=>{for(const t of e)n.includes(t)||n.push(t)},ae=({score:n},{score:e})=>e-n,le=()=>new Map,j=n=>{const e=new Map;for(const t of Object.keys(n))e.set(parseInt(t,10),n[t]);return e},T=n=>A(void 0,void 0,void 0,function*(){const e=new Map;let t=0;for(const s of Object.keys(n))e.set(parseInt(s,10),n[s]),++t%1e3===0&&(yield ye(0));return e}),ye=n=>new Promise(e=>setTimeout(e,n)),Be=/[\n\r\p{Z}\p{P}]+/u,Ue={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},Qe={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},Ye="[^aeiou]",ne="[aeiouy]",k="("+Ye+"[^aeiouy]*)",R="("+ne+"[aeiou]*)",Y=new RegExp("^"+k+"?"+R+k),Ke=new RegExp("^"+k+"?"+R+k+R+"?$"),D=new RegExp("^"+k+"?("+R+k+"){2,}"),de=new RegExp("^"+k+"?"+ne),ue=new RegExp("^"+k+ne+"[^aeiouwxy]$"),Ge=/ll$/,Ze=/^(.+?)e$/,He=/^(.+?)y$/,Xe=/^(.+?(s|t))(ion)$/,et=/^(.+?)(ed|ing)$/,tt=/(at|bl|iz)$/,st=/^(.+?)eed$/,nt=/^.+?[^s]s$/,it=/^.+?(ss|i)es$/,ot=/([^aeiouylsz])\1$/,rt=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,ct=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,at=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;function lt(n){let e=String(n).toLowerCase();if(e.length<3)return e;let t=!1;e.codePointAt(0)===121&&(t=!0,e="Y"+e.slice(1)),it.test(e)?e=e.slice(0,-2):nt.test(e)&&(e=e.slice(0,-1));let s;return(s=st.exec(e))?Y.test(s[1])&&(e=e.slice(0,-1)):(s=et.exec(e))&&de.test(s[1])&&(e=s[1],tt.test(e)?e+="e":ot.test(e)?e=e.slice(0,-1):ue.test(e)&&(e+="e")),(s=He.exec(e))&&de.test(s[1])&&(e=s[1]+"i"),(s=rt.exec(e))&&Y.test(s[1])&&(e=s[1]+Ue[s[2]]),(s=ct.exec(e))&&Y.test(s[1])&&(e=s[1]+Qe[s[2]]),(s=at.exec(e))?D.test(s[1])&&(e=s[1]):(s=Xe.exec(e))&&D.test(s[1])&&(e=s[1]),(s=Ze.exec(e))&&(D.test(s[1])||Ke.test(s[1])&&!ue.test(s[1]))&&(e=s[1]),Ge.test(e)&&D.test(e)&&(e=e.slice(0,-1)),t&&(e="y"+e.slice(1)),e}var ve={};ve.english=["a","able","about","above","abroad","according","accordingly","across","actually","adj","after","afterwards","again","against","ago","ahead","aint","all","allow","allows","almost","alone","along","alongside","already","also","although","always","am","amid","amidst","among","amongst","an","and","another","any","anybody","anyhow","anyone","anything","anyway","anyways","anywhere","apart","appear","appreciate","appropriate","are","arent","around","as","as","aside","ask","asking","associated","at","available","away","awfully","b","back","backward","backwards","be","became","because","become","becomes","becoming","been","before","beforehand","begin","behind","being","believe","below","beside","besides","best","better","between","beyond","both","brief","but","by","c","came","can","cannot","cant","cant","caption","cause","causes","certain","certainly","changes","clearly","cmon","co","co.","com","come","comes","concerning","consequently","consider","considering","contain","containing","contains","corresponding","could","couldnt","course","cs","currently","d","dare","darent","definitely","described","despite","did","didnt","different","directly","do","does","doesnt","doing","done","dont","down","downwards","during","e","each","edu","eg","eight","eighty","either","else","elsewhere","end","ending","enough","entirely","especially","et","etc","even","ever","evermore","every","everybody","everyone","everything","everywhere","ex","exactly","example","except","f","fairly","far","farther","few","fewer","fifth","first","five","followed","following","follows","for","forever","former","formerly","forth","forward","found","four","from","further","furthermore","g","get","gets","getting","given","gives","go","goes","going","gone","got","gotten","greetings","h","had","hadnt","half","happens","hardly","has","hasnt","have","havent","having","he","hed","hell","hello","help","hence","her","here","hereafter","hereby","herein","heres","hereupon","hers","herself","hes","hi","him","himself","his","hither","hopefully","how","howbeit","however","hundred","i","id","ie","if","ignored","ill","im","immediate","in","inasmuch","inc","inc.","indeed","indicate","indicated","indicates","inner","inside","insofar","instead","into","inward","is","isnt","it","itd","itll","its","its","itself","ive","j","just","k","keep","keeps","kept","know","known","knows","l","last","lately","later","latter","latterly","least","less","lest","let","lets","like","liked","likely","likewise","little","look","looking","looks","low","lower","ltd","m","made","mainly","make","makes","many","may","maybe","maynt","me","mean","meantime","meanwhile","merely","might","mightnt","mine","minus","miss","more","moreover","most","mostly","mr","mrs","much","must","mustnt","my","myself","n","name","namely","nd","near","nearly","necessary","need","neednt","needs","neither","never","neverf","neverless","nevertheless","new","next","nine","ninety","no","nobody","non","none","nonetheless","noone","no-one","nor","normally","not","nothing","notwithstanding","novel","now","nowhere","o","obviously","of","off","often","oh","ok","okay","old","on","once","one","ones","ones","only","onto","opposite","or","other","others","otherwise","ought","oughtnt","our","ours","ourselves","out","outside","over","overall","own","p","particular","particularly","past","per","perhaps","placed","please","plus","possible","presumably","probably","provided","provides","q","que","quite","qv","r","rather","rd","re","really","reasonably","recent","recently","regarding","regardless","regards","relatively","respectively","right","round","s","said","same","saw","say","saying","says","second","secondly","see","seeing","seem","seemed","seeming","seems","seen","self","selves","sensible","sent","serious","seriously","seven","several","shall","shant","she","shed","shell","shes","should","shouldnt","since","six","so","some","somebody","someday","somehow","someone","something","sometime","sometimes","somewhat","somewhere","soon","sorry","specified","specify","specifying","still","sub","such","sup","sure","t","take","taken","taking","tell","tends","th","than","thank","thanks","thanx","that","thatll","thats","thats","thatve","the","their","theirs","them","themselves","then","thence","there","thereafter","thereby","thered","therefore","therein","therell","therere","theres","theres","thereupon","thereve","these","they","theyd","theyll","theyre","theyve","thing","things","think","third","thirty","this","thorough","thoroughly","those","though","three","through","throughout","thru","thus","till","to","together","too","took","toward","towards","tried","tries","truly","try","trying","ts","twice","two","u","un","under","underneath","undoing","unfortunately","unless","unlike","unlikely","until","unto","up","upon","upwards","us","use","used","useful","uses","using","usually","v","value","various","versus","very","via","viz","vs","w","want","wants","was","wasnt","way","we","wed","welcome","well","well","went","were","were","werent","weve","what","whatever","whatll","whats","whatve","when","whence","whenever","where","whereafter","whereas","whereby","wherein","wheres","whereupon","wherever","whether","which","whichever","while","whilst","whither","who","whod","whoever","whole","wholl","whom","whomever","whos","whose","why","will","willing","wish","with","within","without","wonder","wont","would","wouldnt","x","y","yes","yet","you","youd","youll","your","youre","yours","yourself","yourselves","youve","z","zero"];const ie=new Set(ve.english);ie.delete("vs");ie.delete("recent");const dt={idField:"id",tokenize:(n,e)=>{try{return n.match(/\w+/g)||[]}catch(t){return console.error("Cannot tokenize %s",e,t),[]}},processTerm:(n,e)=>{const t=lt(n),s=ie.has(n);return n.length>32||s?null:t},fields:["text","title","links","aka","names"],storeFields:["title","topic","aka"],searchOptions:{prefix:!0,boost:{title:3,link:5,aka:2}}};function ut(n){return I.loadJSON(n,dt)}const $=x(!0),be=x(!0),X=x(""),ee=x(null),V=x("");async function ht(){const n="https://htrqhjrmmqrqaccchyne.supabase.co/storage/v1/object/public/notes-public/notes.index.json";try{const e=await je(n,{responseType:"text"});ee.value=e}catch(e){X.value=`Unable to load search index: ${e}`,console.error(e)}finally{be.value=!1}}ht();const ft=he(()=>ee.value?ut(ee.value):null),mt=he(()=>{var n;return V.value?((n=ft.value)==null?void 0:n.search(V.value))||[]:[]}),gt={class:"w-[80vw] h-[80vh] max-w-[640px] max-h-[480px] bg-#252423 border border-#656463 rounded-lg shadow-xl flex flex-col pt-3 px-4 pb-4 gap-2 text-#e9e8e7"},pt={class:"flex flex-none items-center"},wt=v("h1",{class:"text-#8b8685 font-bold"},"Search notes",-1),_t=v("div",{class:"flex-1"},null,-1),yt={key:0,class:"rounded p-2 border border-transparent"},vt={key:1,class:"rounded p-2 border border-transparent bg-red-400/20"},bt=["href"],xt={class:"text-#ffffbb"},kt=xe({__name:"SearchDialog",setup(n){const e=x(null),t=x(null),s=x(null);ke(()=>{var o,r,c;$&&((o=e.value)==null||o.showModal(),(r=t.value)==null||r.focus()),(c=e.value)==null||c.addEventListener("close",()=>{$.value=!1})}),ze(()=>$.value,o=>{var r,c;o?(r=e.value)==null||r.showModal():(c=e.value)==null||c.close()});function i(o){var r;if(o.key==="Enter"){const c=(r=s.value)==null?void 0:r.querySelector("a");c==null||c.click()}}return(o,r)=>{const c=Se("iconify-icon");return F(),M("dialog",{ref_key:"dialog",ref:e,class:"bg-transparent backdrop:bg-black/40"},[v("div",gt,[v("div",pt,[wt,_t,v("div",null,[v("button",{onClick:r[0]||(r[0]=a=>{var l;return(l=e.value)==null?void 0:l.close()}),class:"text-#8b8685 flex"},[Ie(c,{icon:"bi:x-lg",class:"text-#8b8685"})])])]),Oe(v("input",{ref_key:"input",ref:t,type:"text",class:"w-full h-10 px-2 border border-#454443 bg-#090807 text-#e9e8e7 rounded placeholder:text-#8b8685",placeholder:"Search for a note…","onUpdate:modelValue":r[1]||(r[1]=a=>Me(V)?V.value=a:null),onKeydown:i},null,544),[[Fe,C(V)]]),v("div",{class:"flex-1 overflow-y-auto overflow-x-hidden",ref_key:"resultsDiv",ref:s},[C(be)?(F(),M("div",yt," Loading… ")):oe("",!0),C(X)?(F(),M("div",vt,L(C(X)),1)):oe("",!0),(F(!0),M(Ce,null,Ve(C(mt).slice(0,25),a=>(F(),M("a",{key:a.id,class:"block rounded p-2 border border-transparent hover:border-#ffffbb/10 hover:bg-#ffffbb/5 truncate text-#8b8685",href:a.id},[v("span",xt,L(a.title),1),Ee(" "+L(" — ")+" "+L(a.excerpt),1)],8,bt))),128))],512)])],512)}}});let K;function Ot(){if(!K){K=Le(kt);const n=document.createElement("div");document.body.appendChild(n),K.mount(n)}$.value=!0}export{Ot as openSearch};

<!DOCTYPE html>
<html data-precompiled=true lang="en" data-dtinth="true">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/icon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reverse-engineering Insta360 Link Controller WebSockets protocol | notes.dt.in.th</title><meta property="og:title" content="Reverse-engineering Insta360 Link Controller WebSockets protocol" data-source="note">
<meta property="og:image" content="https://screenshot.source.in.th/image/_/notes/Insta360LinkControllerWebSocketProtocol" data-source="note">
<meta property="og:image:width" content="1800" data-source="note">
<meta property="og:image:height" content="1680" data-source="note">
<link rel="canonical" href="https://notes.dt.in.th/Insta360LinkControllerWebSocketProtocol" data-source="note"><style id="note-styles">/* layer: default */
.me[data-v-8c9498c0]{margin-inline-end:1rem;}</style>
    <script
      async
      src="https://cdn.jsdelivr.net/npm/iconify-icon@2.1.0/dist/iconify-icon.min.js"
      integrity="sha256-dY2Ug42wyv3rl+sLVKEg3jbPs8f+hi7tmJ836AxVDwI="
      crossorigin="anonymous"
    ></script>
    <script
      async
      src="https://cdn.jsdelivr.net/npm/blurhash-image@1.0.1/blurhash-image.min.js"
      integrity="sha256-qrUUgTGk7xA7iVCwraHNQjwy2JryA0K4L3DL4qidagQ="
      crossorigin="anonymous"
    ></script>
    <script type="module" crossorigin src="/runtime/index.js"></script>
    <link rel="modulepreload" crossorigin href="/assets/supabase-CjkNZD6A.js">
    <link rel="stylesheet" crossorigin href="/runtime/index.css">
  </head>
  <body class="bg-#252423 text-#e9e8e7 antialiased">
    <header class="h-[58px] bg-#090807 border-b border-#454443 z-20 flex">
      <div class="flex items-center pl-[18px] flex-none">
        <a
          class="flex items-center text-#8b8685 hover:text-#ffffbb text-lg"
          href="/"
          >notes.dt.in.th</a
        >
      </div>
      <div
        class="flex-1 flex items-center text-#8b8685 [&_a:hover]:text-#ffffbb overflow-hidden"
        id="headerMiddle"
      >
        <div class="px-2 flex-none">›</div><div class="truncate"><a title="Hardware (topic)" href="Hardware">Hardware</a></div>
      </div>
      <div
        class="flex items-center px-[18px] flex-none gap-4"
        id="headerToolbar"
      ></div>
    </header>
    <div class="h-entry">
      <main class="bg-#353433" id="main">
        <div class="notes-layout-container mx-auto p-6 py-12" id="mainContents">
          <div class="prose e-content" id="noteContents"><!--[--><h1 id="reverse-engineering-insta360-link-controller-websockets-protocol" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#reverse-engineering-insta360-link-controller-websockets-protocol" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>Reverse-engineering Insta360 Link Controller WebSockets protocol</h1><p data-v-8c9498c0>Insta360 Link Controller software version 1.4.1 supports remotely controlling the webcam using a web interface on the phone. I want to try reverse-engineering the communication protocol so that we can build a custom controller software.</p><p data-v-8c9498c0>With the help of <a href="https://claude.ai/" data-v-8c9498c0>Claude</a>, we were able to reverse-engineer <a href="https://github.com/creatorsgarten/insta360-link-controller/blob/main/insta360linkcontroller.proto" data-v-8c9498c0>the protocol</a> in 20 minutes, and <a href="https://github.com/rayriffy" data-v-8c9498c0>@rayriffy</a> was able to implement a <a href="https://github.com/creatorsgarten/insta360-link-controller" data-v-8c9498c0>controller software</a> for it.</p><blockquote class="twitter-tweet" data-v-8c9498c0><p lang="en" dir="ltr" data-v-8c9498c0>Today me and <a href="https://twitter.com/dtinth?ref_src=twsrc%5Etfw" data-v-8c9498c0>@dtinth</a> working on reverse-engineering Insta360 Link communication protocol to make it controllable with Xbox controller.<br data-v-8c9498c0>Now we can control camera smoothly without any messy movement by dragging a mouse to move a camera itself. <a href="https://t.co/UMsKoHlwqX" data-v-8c9498c0>pic.twitter.com/UMsKoHlwqX</a></p>— Riffy 7/LIVE FUN!! 10/JSBKK (@rayriffy) <a href="https://twitter.com/rayriffy/status/1829962321667694891?ref_src=twsrc%5Etfw" data-v-8c9498c0>August 31, 2024</a></blockquote><h2 id="background" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#background" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>Background</h2><p data-v-8c9498c0>I am part of <a href="https://creatorsgarten.org/" data-v-8c9498c0>Creatorsgarten</a>’s livestreaming crew. We use <a href="https://www.insta360.com/product/insta360-link" data-v-8c9498c0>Insta360 Link</a> to stream our events. The camera is controlled by Insta360 Link Controller software. Being a consumer product, Insta360 does not provide a SDK for it; the only way to control it on a Mac is to use <a href="https://www.insta360.com/download/insta360-link" data-v-8c9498c0>its desktop app</a> to control the camera. We had to use a mouse to control the camera, which is not ideal for our use case.</p><p data-v-8c9498c0>In August 2023, Insta360 released an update to the software that allows controlling the camera via a mobile web interface.</p><p data-v-8c9498c0><img src="https://im.dt.in.th/ipfs/bafybeihg7prffzmjaennsazx22kdh3bma4gbdywwkygpjlwk576ushlcae/image.webp" alt="" data-v-8c9498c0></p><p data-v-8c9498c0>The desktop app launches a WebSocket server, and the mobile web interface connects to it. Therefore, the desktop app must be running for the mobile web interface to work. With this, we can use Google Chrome’s Developer Tools to inspect the WebSocket messages. Time for some <a href="Hardware" data-v-8c9498c0>hardware hacking</a>.</p><h2 id="reverse-engineering-the-websocket-protocol" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#reverse-engineering-the-websocket-protocol" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>Reverse engineering the WebSocket protocol</h2><p data-v-8c9498c0>From preliminary inspection, <strong data-v-8c9498c0>the messages are in binary format:</strong></p><p data-v-8c9498c0><img src="https://im.dt.in.th/ipfs/bafybeidohloul5srn535mnuf3nq72ran6tpjtwddvrposxlgc4aah5spt4/image.webp" alt="" data-v-8c9498c0></p><p data-v-8c9498c0>By looking at the Initiator tab, we can find the <a href="JavaScript" data-v-8c9498c0>JavaScript</a> code that is responsible for the communication.</p><p data-v-8c9498c0><img src="https://im.dt.in.th/ipfs/bafybeigdzpymqhk2xfl5spjqtknfhpdkejlyagjhdwtjhck5yatg2a27ke/image.webp" alt="" data-v-8c9498c0></p><p data-v-8c9498c0>When beautified, <strong data-v-8c9498c0>this results in 7000+ lines of code.</strong> Reverse-engineering this by hand would take a lot of time. Therefore, I asked <a href="https://claude.ai/" data-v-8c9498c0>Claude 3.5 Sonnet</a> (through Anthropic Console) to help me with this task:</p><div class="notes-bubble" data-author-position="right" data-v-8c9498c0><div class="notes-bubble__author" data-v-8c9498c0><span class="notes-bubble__me" data-v-8c9498c0>Me:</span></div><div class="notes-bubble__message" data-v-8c9498c0><p data-v-8c9498c0>I got this JavaScript code that can interface with a camera via WebSocket:</p><pre data-v-8c9498c0><code data-v-8c9498c0>&lt;script&gt; (7000 lines of JavaScript) &lt;/script&gt;
</code></pre><p data-v-8c9498c0>The camera is Insta360 Link. The communication between the app and the websocket server is binary format. From the given code, describe the binary message format so that we can implement custom software to interface with this camera.</p></div></div><p data-v-8c9498c0>…and Claude told me:</p><div class="notes-bubble" data-author-position="left" data-v-8c9498c0><div class="notes-bubble__author" data-v-8c9498c0><!----></div><div class="notes-bubble__message" data-v-8c9498c0><p data-v-8c9498c0>The messages use Protocol Buffers (protobuf) for serialization. This can be seen from the use of protobuf-related functions and types (e.g., <code data-v-8c9498c0>Reader</code>, <code data-v-8c9498c0>Writer</code>, <code data-v-8c9498c0>encode</code>, <code data-v-8c9498c0>decode</code>).</p></div></div><p data-v-8c9498c0>This’s great to hear! I have never worked with protobuf or gRPC before, so I don’t know how its generated client code looks like, and I don’t know its binary format, so I wasn’t able to recognize it. I’m impressed by how Claude can recognize it from the JavaScript code (and also told me the telltale signs to look for).</p><p data-v-8c9498c0>But I remember that when using protobuf, there is a <strong data-v-8c9498c0>.proto</strong> file that describes the message format. Then client libraries can be generated from this file. With this knowledge, I asked Claude to reconstruct the protobuf schema from the JavaScript code.</p><div class="notes-bubble" data-author-position="right" data-v-8c9498c0><div class="notes-bubble__author" data-v-8c9498c0><span class="notes-bubble__me" data-v-8c9498c0>Me:</span></div><div class="notes-bubble__message" data-v-8c9498c0><p data-v-8c9498c0>Recreate the proto file from the given code.</p></div></div><p data-v-8c9498c0>With that, the job is done in mere minutes. Now we have <a href="https://github.com/creatorsgarten/insta360-link-controller/blob/main/insta360linkcontroller.proto" data-v-8c9498c0>the protobuf file</a>.</p><p data-v-8c9498c0>Here’s how the Anthropics Console looks like:</p><p data-v-8c9498c0><img src="https://im.dt.in.th/ipfs/bafybeienh5oodn3qj3jgecd2tvpdycfdjgmca274trxfuh4ogmhekscea4/image.webp" alt="" data-v-8c9498c0></p><h2 id="understanding-the-communication" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#understanding-the-communication" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>Understanding the communication</h2><p data-v-8c9498c0>Now in Google Chrome inspector, it shows a hexdump that looks like this:</p><pre data-v-8c9498c0><code data-v-8c9498c0>00000000: 1001 5a28 0a0e 3939 3939 3939 3939 3939  ..Z(..9999999999
00000001: 3939 3939 100c 1816 2001 2004 20ff 0120  9999.... . . ..
00000002: 0228 ffff ffff ffff ffff ff01            .(..........
</code></pre><p data-v-8c9498c0>However, <a href="https://www.protobufpal.com/" data-v-8c9498c0>Protobufpal</a> expects just the hex parts. So once more I asked Claude to help me with this (this time via <a href="OpenWebUILiteLLM" data-v-8c9498c0>Open Web UI + LiteLLM</a>).</p><div class="notes-bubble" data-author-position="right" data-v-8c9498c0><div class="notes-bubble__author" data-v-8c9498c0><span class="notes-bubble__me" data-v-8c9498c0>Me:</span></div><div class="notes-bubble__message" data-v-8c9498c0><p data-v-8c9498c0>from xxd hexdump output, how do i get just the hex part, maybe use cut?</p></div></div><div class="notes-bubble" data-author-position="left" data-v-8c9498c0><div class="notes-bubble__author" data-v-8c9498c0><!----></div><div class="notes-bubble__message" data-v-8c9498c0><p data-v-8c9498c0>Yes, you can use <code data-v-8c9498c0>cut</code> to extract just the hex part from <code data-v-8c9498c0>xxd</code> output. Here&#39;s how you can do it:</p><p data-v-8c9498c0>For the standard <code data-v-8c9498c0>xxd</code> output format:</p><pre class="shiki github-dark" style="background-color:#252423;color:#e1e4e8;" tabindex="0" data-v-8c9498c0><code data-v-8c9498c0><span class="line" data-v-8c9498c0><span style="color:#B392F0;" data-v-8c9498c0>xxd</span><span style="color:#9ECBFF;" data-v-8c9498c0> file</span><span style="color:#F97583;" data-v-8c9498c0> |</span><span style="color:#B392F0;" data-v-8c9498c0> cut</span><span style="color:#79B8FF;" data-v-8c9498c0> -d</span><span style="color:#9ECBFF;" data-v-8c9498c0>&#39; &#39;</span><span style="color:#79B8FF;" data-v-8c9498c0> -f2-7</span></span></code></pre><p data-v-8c9498c0>This command does the following:</p><ul data-v-8c9498c0><li data-v-8c9498c0><code data-v-8c9498c0>xxd file</code> generates the hexdump</li><li data-v-8c9498c0><code data-v-8c9498c0>cut -d&#39; &#39; -f2-7</code> cuts the output using space as a delimiter and selects fields 2 through 7, which contain the hex values</li></ul></div></div><p data-v-8c9498c0>Almost correct, the correct command is actually <code data-v-8c9498c0>cut -d&#39; &#39; -f2-9</code>. Now I can decode the message:</p><p data-v-8c9498c0><img src="https://im.dt.in.th/ipfs/bafybeidxqd7dfg2nynx2otxy2mkykzgbfxdfbfwy4zf3gzv6f2yqlsak6m/image.webp" alt="" data-v-8c9498c0></p><h2 id="notes-on-communication-flow" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#notes-on-communication-flow" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>Notes on communication flow</h2><h3 id="upon-first-communication" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#upon-first-communication" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>Upon first communication</h3><p data-v-8c9498c0>Upon connection, we receive:</p><pre class="shiki github-dark" style="background-color:#252423;color:#e1e4e8;" tabindex="0" data-v-8c9498c0><code data-v-8c9498c0><span class="line" data-v-8c9498c0><span style="color:#9ECBFF;" data-v-8c9498c0>  &quot;connectionNotify&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: {</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>    &quot;connectNum&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: </span><span style="color:#79B8FF;" data-v-8c9498c0>1</span><span style="color:#E1E4E8;" data-v-8c9498c0>,</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>    &quot;inControl&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: </span><span style="color:#79B8FF;" data-v-8c9498c0>false</span></span>
<span class="line" data-v-8c9498c0><span style="color:#E1E4E8;" data-v-8c9498c0>  }</span></span></code></pre><h3 id="requesting-control" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#requesting-control" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>Requesting control</h3><p data-v-8c9498c0>Then we send this message to request control to the camera:</p><pre class="shiki github-dark" style="background-color:#252423;color:#e1e4e8;" tabindex="0" data-v-8c9498c0><code data-v-8c9498c0><span class="line" data-v-8c9498c0><span style="color:#9ECBFF;" data-v-8c9498c0>  &quot;controlRequest&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: {</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>    &quot;token&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: </span><span style="color:#9ECBFF;" data-v-8c9498c0>&quot;AAaaaAAAAaaAaaaaAAAAaaaAAaAAaa&quot;</span></span>
<span class="line" data-v-8c9498c0><span style="color:#E1E4E8;" data-v-8c9498c0>  }</span></span></code></pre><p data-v-8c9498c0>It will send a success message back:</p><pre class="shiki github-dark" style="background-color:#252423;color:#e1e4e8;" tabindex="0" data-v-8c9498c0><code data-v-8c9498c0><span class="line" data-v-8c9498c0><span style="color:#9ECBFF;" data-v-8c9498c0>  &quot;controlResponse&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: {</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>    &quot;success&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: </span><span style="color:#79B8FF;" data-v-8c9498c0>true</span></span>
<span class="line" data-v-8c9498c0><span style="color:#E1E4E8;" data-v-8c9498c0>  }</span></span></code></pre><p data-v-8c9498c0>It will also send the serial number which we need to use in later messages:</p><pre class="shiki github-dark" style="background-color:#252423;color:#e1e4e8;" tabindex="0" data-v-8c9498c0><code data-v-8c9498c0><span class="line" data-v-8c9498c0><span style="color:#9ECBFF;" data-v-8c9498c0>  &quot;deviceInfoNotify&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: {</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>    &quot;deviceSerialNum&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: </span><span style="color:#9ECBFF;" data-v-8c9498c0>&quot;99999999999999&quot;</span></span>
<span class="line" data-v-8c9498c0><span style="color:#6A737D;" data-v-8c9498c0>    // ...</span></span>
<span class="line" data-v-8c9498c0><span style="color:#E1E4E8;" data-v-8c9498c0>  }</span></span></code></pre><h3 id="heartbeating" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#heartbeating" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>Heartbeating</h3><p data-v-8c9498c0>Every once in a while, we must send a heartbeat message to keep the connection alive:</p><pre class="shiki github-dark" style="background-color:#252423;color:#e1e4e8;" tabindex="0" data-v-8c9498c0><code data-v-8c9498c0><span class="line" data-v-8c9498c0><span style="color:#9ECBFF;" data-v-8c9498c0>  &quot;heartbeatRequest&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: {}</span></span></code></pre><h3 id="controlling-pan-and-tilt-speed" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#controlling-pan-and-tilt-speed" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>Controlling pan and tilt speed.</h3><p data-v-8c9498c0>Send this message to control the pan and tilt speed.</p><pre class="shiki github-dark" style="background-color:#252423;color:#e1e4e8;" tabindex="0" data-v-8c9498c0><code data-v-8c9498c0><span class="line" data-v-8c9498c0><span style="color:#9ECBFF;" data-v-8c9498c0>  &quot;uvcExtendRequest&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: {</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>    &quot;data&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: [</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>      1</span><span style="color:#E1E4E8;" data-v-8c9498c0>,</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>      4</span><span style="color:#E1E4E8;" data-v-8c9498c0>,</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>      255</span><span style="color:#E1E4E8;" data-v-8c9498c0>,</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>      2</span></span>
<span class="line" data-v-8c9498c0><span style="color:#E1E4E8;" data-v-8c9498c0>    ],</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>    &quot;curDeviceSerialNum&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: </span><span style="color:#9ECBFF;" data-v-8c9498c0>&quot;99999999999999&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>,</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>    &quot;paramType&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: </span><span style="color:#FDAEB7;font-style:italic;" data-v-8c9498c0>PARAM_PAN_TILT_RELATIVE</span><span style="color:#E1E4E8;" data-v-8c9498c0>,</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>    &quot;selector&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: </span><span style="color:#FDAEB7;font-style:italic;" data-v-8c9498c0>XU_PANTILT_RELATIVE_CONTROL</span><span style="color:#E1E4E8;" data-v-8c9498c0>,</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>    &quot;presetPosIndex&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: </span><span style="color:#79B8FF;" data-v-8c9498c0>-1</span></span>
<span class="line" data-v-8c9498c0><span style="color:#E1E4E8;" data-v-8c9498c0>  }</span></span></code></pre><p data-v-8c9498c0>The data format is <code data-v-8c9498c0>[signX, magnitudeX, signY, magnitudeY]</code>.</p><ul data-v-8c9498c0><li data-v-8c9498c0>Sign is 0 for no movement, 1 for positive, and 255 for negative.</li><li data-v-8c9498c0>Magnitude is a positive integer. From our testing we don’t recommend going over 30.</li></ul><h3 id="controlling-zoom-level" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#controlling-zoom-level" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>Controlling zoom level</h3><pre class="shiki github-dark" style="background-color:#252423;color:#e1e4e8;" tabindex="0" data-v-8c9498c0><code data-v-8c9498c0><span class="line" data-v-8c9498c0><span style="color:#9ECBFF;" data-v-8c9498c0>  &quot;uvcRequest&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: {</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>    &quot;curDeviceSerialNum&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: </span><span style="color:#9ECBFF;" data-v-8c9498c0>&quot;99999999999999&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>,</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>    &quot;paramType&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: </span><span style="color:#FDAEB7;font-style:italic;" data-v-8c9498c0>PARAM_ZOOM</span><span style="color:#E1E4E8;" data-v-8c9498c0>,</span></span>
<span class="line" data-v-8c9498c0><span style="color:#79B8FF;" data-v-8c9498c0>    &quot;value&quot;</span><span style="color:#E1E4E8;" data-v-8c9498c0>: </span><span style="color:#79B8FF;" data-v-8c9498c0>100</span></span>
<span class="line" data-v-8c9498c0><span style="color:#E1E4E8;" data-v-8c9498c0>  }</span></span></code></pre><p data-v-8c9498c0>The value must be between 100 and 400.</p><h2 id="code" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#code" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>Code</h2><p data-v-8c9498c0>Check out <a href="https://github.com/creatorsgarten/insta360-link-controller" data-v-8c9498c0>the code on GitHub</a>.</p><!--]--></div>
        </div>
      </main>
      <footer>
        <div
          class="notes-layout-container mx-auto py-4 px-6 text-#8b8685 text-right text-sm"
          id="footerContents"
        >
          <notes-page-footer></notes-page-footer>
        </div>
      </footer>
    </div>
    <script>
window.precompiledNoteBehavior = function(require, exports, module, Vue) {"use strict";Object.defineProperty(exports, "__esModule", {value: true});/* Analyzed bindings: {} */

const __sfc__ = {};
var _vue = require('vue');

const _withScopeId = n => (_vue.pushScopeId.call(void 0, "data-v-8c9498c0"),n=n(),_vue.popScopeId.call(void 0, ),n)
const _hoisted_1 = /*#__PURE__*/_vue.createStaticVNode.call(void 0, "<h1 id=\"reverse-engineering-insta360-link-controller-websockets-protocol\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#reverse-engineering-insta360-link-controller-websockets-protocol\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>Reverse-engineering Insta360 Link Controller WebSockets protocol</h1><p data-v-8c9498c0>Insta360 Link Controller software version 1.4.1 supports remotely controlling the webcam using a web interface on the phone. I want to try reverse-engineering the communication protocol so that we can build a custom controller software.</p><p data-v-8c9498c0>With the help of <a href=\"https://claude.ai/\" data-v-8c9498c0>Claude</a>, we were able to reverse-engineer <a href=\"https://github.com/creatorsgarten/insta360-link-controller/blob/main/insta360linkcontroller.proto\" data-v-8c9498c0>the protocol</a> in 20 minutes, and <a href=\"https://github.com/rayriffy\" data-v-8c9498c0>@rayriffy</a> was able to implement a <a href=\"https://github.com/creatorsgarten/insta360-link-controller\" data-v-8c9498c0>controller software</a> for it.</p><blockquote class=\"twitter-tweet\" data-v-8c9498c0><p lang=\"en\" dir=\"ltr\" data-v-8c9498c0>Today me and <a href=\"https://twitter.com/dtinth?ref_src=twsrc%5Etfw\" data-v-8c9498c0>@dtinth</a> working on reverse-engineering Insta360 Link communication protocol to make it controllable with Xbox controller.<br data-v-8c9498c0>Now we can control camera smoothly without any messy movement by dragging a mouse to move a camera itself. <a href=\"https://t.co/UMsKoHlwqX\" data-v-8c9498c0>pic.twitter.com/UMsKoHlwqX</a></p>— Riffy 7/LIVE FUN!! 10/JSBKK (@rayriffy) <a href=\"https://twitter.com/rayriffy/status/1829962321667694891?ref_src=twsrc%5Etfw\" data-v-8c9498c0>August 31, 2024</a></blockquote><h2 id=\"background\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#background\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>Background</h2><p data-v-8c9498c0>I am part of <a href=\"https://creatorsgarten.org/\" data-v-8c9498c0>Creatorsgarten</a>’s livestreaming crew. We use <a href=\"https://www.insta360.com/product/insta360-link\" data-v-8c9498c0>Insta360 Link</a> to stream our events. The camera is controlled by Insta360 Link Controller software. Being a consumer product, Insta360 does not provide a SDK for it; the only way to control it on a Mac is to use <a href=\"https://www.insta360.com/download/insta360-link\" data-v-8c9498c0>its desktop app</a> to control the camera. We had to use a mouse to control the camera, which is not ideal for our use case.</p><p data-v-8c9498c0>In August 2023, Insta360 released an update to the software that allows controlling the camera via a mobile web interface.</p><p data-v-8c9498c0><img src=\"https://im.dt.in.th/ipfs/bafybeihg7prffzmjaennsazx22kdh3bma4gbdywwkygpjlwk576ushlcae/image.webp\" alt=\"\" data-v-8c9498c0></p><p data-v-8c9498c0>The desktop app launches a WebSocket server, and the mobile web interface connects to it. Therefore, the desktop app must be running for the mobile web interface to work. With this, we can use Google Chrome’s Developer Tools to inspect the WebSocket messages. Time for some <a href=\"Hardware\" data-v-8c9498c0>hardware hacking</a>.</p><h2 id=\"reverse-engineering-the-websocket-protocol\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#reverse-engineering-the-websocket-protocol\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>Reverse engineering the WebSocket protocol</h2><p data-v-8c9498c0>From preliminary inspection, <strong data-v-8c9498c0>the messages are in binary format:</strong></p><p data-v-8c9498c0><img src=\"https://im.dt.in.th/ipfs/bafybeidohloul5srn535mnuf3nq72ran6tpjtwddvrposxlgc4aah5spt4/image.webp\" alt=\"\" data-v-8c9498c0></p><p data-v-8c9498c0>By looking at the Initiator tab, we can find the <a href=\"JavaScript\" data-v-8c9498c0>JavaScript</a> code that is responsible for the communication.</p><p data-v-8c9498c0><img src=\"https://im.dt.in.th/ipfs/bafybeigdzpymqhk2xfl5spjqtknfhpdkejlyagjhdwtjhck5yatg2a27ke/image.webp\" alt=\"\" data-v-8c9498c0></p><p data-v-8c9498c0>When beautified, <strong data-v-8c9498c0>this results in 7000+ lines of code.</strong> Reverse-engineering this by hand would take a lot of time. Therefore, I asked <a href=\"https://claude.ai/\" data-v-8c9498c0>Claude 3.5 Sonnet</a> (through Anthropic Console) to help me with this task:</p><div class=\"notes-bubble\" data-author-position=\"right\" data-v-8c9498c0><div class=\"notes-bubble__author\" data-v-8c9498c0><span class=\"notes-bubble__me\" data-v-8c9498c0>Me:</span></div><div class=\"notes-bubble__message\" data-v-8c9498c0><p data-v-8c9498c0>I got this JavaScript code that can interface with a camera via WebSocket:</p><pre data-v-8c9498c0><code data-v-8c9498c0>&lt;script&gt; (7000 lines of JavaScript) &lt;/script&gt;\n</code></pre><p data-v-8c9498c0>The camera is Insta360 Link. The communication between the app and the websocket server is binary format. From the given code, describe the binary message format so that we can implement custom software to interface with this camera.</p></div></div><p data-v-8c9498c0>…and Claude told me:</p>", 17)
const _hoisted_18 = {
  class: "notes-bubble",
  "data-author-position": "left"
}
const _hoisted_19 = { class: "notes-bubble__author" }
const _hoisted_20 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_vue.createElementVNode.call(void 0, "div", { class: "notes-bubble__message" }, [
  /*#__PURE__*/_vue.createElementVNode.call(void 0, "p", null, [
    /*#__PURE__*/_vue.createTextVNode.call(void 0, "The messages use Protocol Buffers (protobuf) for serialization. This can be seen from the use of protobuf-related functions and types (e.g., "),
    /*#__PURE__*/_vue.createElementVNode.call(void 0, "code", null, "Reader"),
    /*#__PURE__*/_vue.createTextVNode.call(void 0, ", "),
    /*#__PURE__*/_vue.createElementVNode.call(void 0, "code", null, "Writer"),
    /*#__PURE__*/_vue.createTextVNode.call(void 0, ", "),
    /*#__PURE__*/_vue.createElementVNode.call(void 0, "code", null, "encode"),
    /*#__PURE__*/_vue.createTextVNode.call(void 0, ", "),
    /*#__PURE__*/_vue.createElementVNode.call(void 0, "code", null, "decode"),
    /*#__PURE__*/_vue.createTextVNode.call(void 0, ").")
  ])
], -1 /* HOISTED */))
const _hoisted_21 = /*#__PURE__*/_vue.createStaticVNode.call(void 0, "<p data-v-8c9498c0>This’s great to hear! I have never worked with protobuf or gRPC before, so I don’t know how its generated client code looks like, and I don’t know its binary format, so I wasn’t able to recognize it. I’m impressed by how Claude can recognize it from the JavaScript code (and also told me the telltale signs to look for).</p><p data-v-8c9498c0>But I remember that when using protobuf, there is a <strong data-v-8c9498c0>.proto</strong> file that describes the message format. Then client libraries can be generated from this file. With this knowledge, I asked Claude to reconstruct the protobuf schema from the JavaScript code.</p><div class=\"notes-bubble\" data-author-position=\"right\" data-v-8c9498c0><div class=\"notes-bubble__author\" data-v-8c9498c0><span class=\"notes-bubble__me\" data-v-8c9498c0>Me:</span></div><div class=\"notes-bubble__message\" data-v-8c9498c0><p data-v-8c9498c0>Recreate the proto file from the given code.</p></div></div><p data-v-8c9498c0>With that, the job is done in mere minutes. Now we have <a href=\"https://github.com/creatorsgarten/insta360-link-controller/blob/main/insta360linkcontroller.proto\" data-v-8c9498c0>the protobuf file</a>.</p><p data-v-8c9498c0>Here’s how the Anthropics Console looks like:</p><p data-v-8c9498c0><img src=\"https://im.dt.in.th/ipfs/bafybeienh5oodn3qj3jgecd2tvpdycfdjgmca274trxfuh4ogmhekscea4/image.webp\" alt=\"\" data-v-8c9498c0></p><h2 id=\"understanding-the-communication\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#understanding-the-communication\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>Understanding the communication</h2><p data-v-8c9498c0>Now in Google Chrome inspector, it shows a hexdump that looks like this:</p><pre data-v-8c9498c0><code data-v-8c9498c0>00000000: 1001 5a28 0a0e 3939 3939 3939 3939 3939  ..Z(..9999999999\n00000001: 3939 3939 100c 1816 2001 2004 20ff 0120  9999.... . . ..\n00000002: 0228 ffff ffff ffff ffff ff01            .(..........\n</code></pre><p data-v-8c9498c0>However, <a href=\"https://www.protobufpal.com/\" data-v-8c9498c0>Protobufpal</a> expects just the hex parts. So once more I asked Claude to help me with this (this time via <a href=\"OpenWebUILiteLLM\" data-v-8c9498c0>Open Web UI + LiteLLM</a>).</p><div class=\"notes-bubble\" data-author-position=\"right\" data-v-8c9498c0><div class=\"notes-bubble__author\" data-v-8c9498c0><span class=\"notes-bubble__me\" data-v-8c9498c0>Me:</span></div><div class=\"notes-bubble__message\" data-v-8c9498c0><p data-v-8c9498c0>from xxd hexdump output, how do i get just the hex part, maybe use cut?</p></div></div>", 11)
const _hoisted_32 = {
  class: "notes-bubble",
  "data-author-position": "left"
}
const _hoisted_33 = { class: "notes-bubble__author" }
const _hoisted_34 = /*#__PURE__*/_vue.createStaticVNode.call(void 0, "<div class=\"notes-bubble__message\" data-v-8c9498c0><p data-v-8c9498c0>Yes, you can use <code data-v-8c9498c0>cut</code> to extract just the hex part from <code data-v-8c9498c0>xxd</code> output. Here&#39;s how you can do it:</p><p data-v-8c9498c0>For the standard <code data-v-8c9498c0>xxd</code> output format:</p><pre class=\"shiki github-dark\" style=\"background-color:#252423;color:#e1e4e8;\" tabindex=\"0\" data-v-8c9498c0><code data-v-8c9498c0><span class=\"line\" data-v-8c9498c0><span style=\"color:#B392F0;\" data-v-8c9498c0>xxd</span><span style=\"color:#9ECBFF;\" data-v-8c9498c0> file</span><span style=\"color:#F97583;\" data-v-8c9498c0> |</span><span style=\"color:#B392F0;\" data-v-8c9498c0> cut</span><span style=\"color:#79B8FF;\" data-v-8c9498c0> -d</span><span style=\"color:#9ECBFF;\" data-v-8c9498c0>&#39; &#39;</span><span style=\"color:#79B8FF;\" data-v-8c9498c0> -f2-7</span></span></code></pre><p data-v-8c9498c0>This command does the following:</p><ul data-v-8c9498c0><li data-v-8c9498c0><code data-v-8c9498c0>xxd file</code> generates the hexdump</li><li data-v-8c9498c0><code data-v-8c9498c0>cut -d&#39; &#39; -f2-7</code> cuts the output using space as a delimiter and selects fields 2 through 7, which contain the hex values</li></ul></div>", 1)
const _hoisted_35 = /*#__PURE__*/_vue.createStaticVNode.call(void 0, "<p data-v-8c9498c0>Almost correct, the correct command is actually <code data-v-8c9498c0>cut -d&#39; &#39; -f2-9</code>. Now I can decode the message:</p><p data-v-8c9498c0><img src=\"https://im.dt.in.th/ipfs/bafybeidxqd7dfg2nynx2otxy2mkykzgbfxdfbfwy4zf3gzv6f2yqlsak6m/image.webp\" alt=\"\" data-v-8c9498c0></p><h2 id=\"notes-on-communication-flow\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#notes-on-communication-flow\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>Notes on communication flow</h2><h3 id=\"upon-first-communication\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#upon-first-communication\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>Upon first communication</h3><p data-v-8c9498c0>Upon connection, we receive:</p><pre class=\"shiki github-dark\" style=\"background-color:#252423;color:#e1e4e8;\" tabindex=\"0\" data-v-8c9498c0><code data-v-8c9498c0><span class=\"line\" data-v-8c9498c0><span style=\"color:#9ECBFF;\" data-v-8c9498c0>  &quot;connectionNotify&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: {</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>    &quot;connectNum&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: </span><span style=\"color:#79B8FF;\" data-v-8c9498c0>1</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>,</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>    &quot;inControl&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: </span><span style=\"color:#79B8FF;\" data-v-8c9498c0>false</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#E1E4E8;\" data-v-8c9498c0>  }</span></span></code></pre><h3 id=\"requesting-control\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#requesting-control\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>Requesting control</h3><p data-v-8c9498c0>Then we send this message to request control to the camera:</p><pre class=\"shiki github-dark\" style=\"background-color:#252423;color:#e1e4e8;\" tabindex=\"0\" data-v-8c9498c0><code data-v-8c9498c0><span class=\"line\" data-v-8c9498c0><span style=\"color:#9ECBFF;\" data-v-8c9498c0>  &quot;controlRequest&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: {</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>    &quot;token&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: </span><span style=\"color:#9ECBFF;\" data-v-8c9498c0>&quot;AAaaaAAAAaaAaaaaAAAAaaaAAaAAaa&quot;</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#E1E4E8;\" data-v-8c9498c0>  }</span></span></code></pre><p data-v-8c9498c0>It will send a success message back:</p><pre class=\"shiki github-dark\" style=\"background-color:#252423;color:#e1e4e8;\" tabindex=\"0\" data-v-8c9498c0><code data-v-8c9498c0><span class=\"line\" data-v-8c9498c0><span style=\"color:#9ECBFF;\" data-v-8c9498c0>  &quot;controlResponse&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: {</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>    &quot;success&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: </span><span style=\"color:#79B8FF;\" data-v-8c9498c0>true</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#E1E4E8;\" data-v-8c9498c0>  }</span></span></code></pre><p data-v-8c9498c0>It will also send the serial number which we need to use in later messages:</p><pre class=\"shiki github-dark\" style=\"background-color:#252423;color:#e1e4e8;\" tabindex=\"0\" data-v-8c9498c0><code data-v-8c9498c0><span class=\"line\" data-v-8c9498c0><span style=\"color:#9ECBFF;\" data-v-8c9498c0>  &quot;deviceInfoNotify&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: {</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>    &quot;deviceSerialNum&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: </span><span style=\"color:#9ECBFF;\" data-v-8c9498c0>&quot;99999999999999&quot;</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#6A737D;\" data-v-8c9498c0>    // ...</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#E1E4E8;\" data-v-8c9498c0>  }</span></span></code></pre><h3 id=\"heartbeating\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#heartbeating\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>Heartbeating</h3><p data-v-8c9498c0>Every once in a while, we must send a heartbeat message to keep the connection alive:</p><pre class=\"shiki github-dark\" style=\"background-color:#252423;color:#e1e4e8;\" tabindex=\"0\" data-v-8c9498c0><code data-v-8c9498c0><span class=\"line\" data-v-8c9498c0><span style=\"color:#9ECBFF;\" data-v-8c9498c0>  &quot;heartbeatRequest&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: {}</span></span></code></pre><h3 id=\"controlling-pan-and-tilt-speed\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#controlling-pan-and-tilt-speed\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>Controlling pan and tilt speed.</h3><p data-v-8c9498c0>Send this message to control the pan and tilt speed.</p><pre class=\"shiki github-dark\" style=\"background-color:#252423;color:#e1e4e8;\" tabindex=\"0\" data-v-8c9498c0><code data-v-8c9498c0><span class=\"line\" data-v-8c9498c0><span style=\"color:#9ECBFF;\" data-v-8c9498c0>  &quot;uvcExtendRequest&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: {</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>    &quot;data&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: [</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>      1</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>,</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>      4</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>,</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>      255</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>,</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>      2</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#E1E4E8;\" data-v-8c9498c0>    ],</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>    &quot;curDeviceSerialNum&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: </span><span style=\"color:#9ECBFF;\" data-v-8c9498c0>&quot;99999999999999&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>,</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>    &quot;paramType&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: </span><span style=\"color:#FDAEB7;font-style:italic;\" data-v-8c9498c0>PARAM_PAN_TILT_RELATIVE</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>,</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>    &quot;selector&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: </span><span style=\"color:#FDAEB7;font-style:italic;\" data-v-8c9498c0>XU_PANTILT_RELATIVE_CONTROL</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>,</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>    &quot;presetPosIndex&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: </span><span style=\"color:#79B8FF;\" data-v-8c9498c0>-1</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#E1E4E8;\" data-v-8c9498c0>  }</span></span></code></pre><p data-v-8c9498c0>The data format is <code data-v-8c9498c0>[signX, magnitudeX, signY, magnitudeY]</code>.</p><ul data-v-8c9498c0><li data-v-8c9498c0>Sign is 0 for no movement, 1 for positive, and 255 for negative.</li><li data-v-8c9498c0>Magnitude is a positive integer. From our testing we don’t recommend going over 30.</li></ul><h3 id=\"controlling-zoom-level\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#controlling-zoom-level\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>Controlling zoom level</h3><pre class=\"shiki github-dark\" style=\"background-color:#252423;color:#e1e4e8;\" tabindex=\"0\" data-v-8c9498c0><code data-v-8c9498c0><span class=\"line\" data-v-8c9498c0><span style=\"color:#9ECBFF;\" data-v-8c9498c0>  &quot;uvcRequest&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: {</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>    &quot;curDeviceSerialNum&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: </span><span style=\"color:#9ECBFF;\" data-v-8c9498c0>&quot;99999999999999&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>,</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>    &quot;paramType&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: </span><span style=\"color:#FDAEB7;font-style:italic;\" data-v-8c9498c0>PARAM_ZOOM</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>,</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#79B8FF;\" data-v-8c9498c0>    &quot;value&quot;</span><span style=\"color:#E1E4E8;\" data-v-8c9498c0>: </span><span style=\"color:#79B8FF;\" data-v-8c9498c0>100</span></span>\n<span class=\"line\" data-v-8c9498c0><span style=\"color:#E1E4E8;\" data-v-8c9498c0>  }</span></span></code></pre><p data-v-8c9498c0>The value must be between 100 and 400.</p><h2 id=\"code\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#code\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>Code</h2><p data-v-8c9498c0>Check out <a href=\"https://github.com/creatorsgarten/insta360-link-controller\" data-v-8c9498c0>the code on GitHub</a>.</p>", 26)
function render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_notes_bubble_author = _vue.resolveComponent.call(void 0, "notes-bubble-author")

  return (_vue.openBlock.call(void 0, ), _vue.createElementBlock.call(void 0, _vue.Fragment, null, [
    _hoisted_1,
    _vue.createElementVNode.call(void 0, "div", _hoisted_18, [
      _vue.createElementVNode.call(void 0, "div", _hoisted_19, [
        _vue.createVNode.call(void 0, _component_notes_bubble_author, { author: "Claude 3.5 Sonnet" })
      ]),
      _hoisted_20
    ]),
    _hoisted_21,
    _vue.createElementVNode.call(void 0, "div", _hoisted_32, [
      _vue.createElementVNode.call(void 0, "div", _hoisted_33, [
        _vue.createVNode.call(void 0, _component_notes_bubble_author, { author: "Claude 3.5 Sonnet" })
      ]),
      _hoisted_34
    ]),
    _hoisted_35
  ], 64 /* STABLE_FRAGMENT */))
}
__sfc__.render = render
__sfc__.__scopeId = "data-v-8c9498c0"
__sfc__.__file = "Note.vue"
exports. default = __sfc__};
window.precompiledFrontMatter = {"title":"Reverse-engineering Insta360 Link Controller WebSockets protocol","public":true};
</script>
  </body>
</html>

<!DOCTYPE html>
<html data-precompiled=true lang="en" data-dtinth="true">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/icon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>All the fonts from CU Writer | notes.dt.in.th</title><meta property="og:title" content="All the fonts from CU Writer" data-source="note">
<meta property="og:image" content="https://screenshot.source.in.th/image/_/notes/CuWriterFonts" data-source="note">
<meta property="og:image:width" content="1800" data-source="note">
<meta property="og:image:height" content="1680" data-source="note">
<link rel="canonical" href="https://notes.dt.in.th/CuWriterFonts" data-source="note"><style id="note-styles">.n-table-bordered[data-v-8c9498c0] {
  border-collapse: collapse;
}
.n-table-bordered th[data-v-8c9498c0], .n-table-bordered td[data-v-8c9498c0] {
  border: 1px solid #555453;
  padding: 0.5em;
}

/* layer: default */
.sr-only[data-v-8c9498c0]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0;}
.my[data-v-8c9498c0]{margin-top:1rem;margin-bottom:1rem;}
.me[data-v-8c9498c0]{margin-inline-end:1rem;}
.border-collapse[data-v-8c9498c0]{border-collapse:collapse;}
.border[data-v-8c9498c0]{border-width:1px;}
.border-\#656463[data-v-8c9498c0]{--un-border-opacity:1;border-color:rgb(101 100 99 / var(--un-border-opacity));}
.rounded[data-v-8c9498c0]{border-radius:0.25rem;}
.bg-\#252423[data-v-8c9498c0]{--un-bg-opacity:1;background-color:rgb(37 36 35 / var(--un-bg-opacity));}
.p24[data-v-8c9498c0]{padding:6rem;}
.px-8[data-v-8c9498c0]{padding-left:2rem;padding-right:2rem;}
.filter[data-v-8c9498c0]{filter:var(--un-blur) var(--un-brightness) var(--un-contrast) var(--un-drop-shadow) var(--un-grayscale) var(--un-hue-rotate) var(--un-invert) var(--un-saturate) var(--un-sepia);}</style>
    <script
      async
      src="https://cdn.jsdelivr.net/npm/iconify-icon@2.1.0/dist/iconify-icon.min.js"
      integrity="sha256-dY2Ug42wyv3rl+sLVKEg3jbPs8f+hi7tmJ836AxVDwI="
      crossorigin="anonymous"
    ></script>
    <script
      async
      src="https://cdn.jsdelivr.net/npm/blurhash-image@1.0.1/blurhash-image.min.js"
      integrity="sha256-qrUUgTGk7xA7iVCwraHNQjwy2JryA0K4L3DL4qidagQ="
      crossorigin="anonymous"
    ></script>
    <script type="module" crossorigin src="/runtime/index.js"></script>
    <link rel="modulepreload" crossorigin href="/assets/supabase-CjkNZD6A.js">
    <link rel="stylesheet" crossorigin href="/runtime/index.css">
  </head>
  <body class="bg-#252423 text-#e9e8e7 antialiased">
    <header class="h-[58px] bg-#090807 border-b border-#454443 z-20 flex">
      <div class="flex items-center pl-[18px] flex-none">
        <a
          class="flex items-center text-#8b8685 hover:text-#ffffbb text-lg"
          href="/"
          >notes.dt.in.th</a
        >
      </div>
      <div
        class="flex-1 flex items-center text-#8b8685 [&_a:hover]:text-#ffffbb overflow-hidden"
        id="headerMiddle"
      >
        <div class="px-2 flex-none">›</div><div class="truncate"><a title="Typography (topic)" href="Typography">Typography</a></div>
      </div>
      <div
        class="flex items-center px-[18px] flex-none gap-4"
        id="headerToolbar"
      ></div>
    </header>
    <div class="h-entry">
      <main class="bg-#353433" id="main">
        <div class="notes-layout-container mx-auto p-6 py-12" id="mainContents">
          <div class="prose e-content" id="noteContents"><!--[--><h1 id="all-the-fonts-from-cu-writer" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#all-the-fonts-from-cu-writer" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>All the fonts from CU Writer</h1><p data-v-8c9498c0><a href="https://th.wikipedia.org/wiki/%E0%B8%8B%E0%B8%B5%E0%B8%A2%E0%B8%B9%E0%B9%84%E0%B8%A3%E0%B9%80%E0%B8%95%E0%B8%AD%E0%B8%A3%E0%B9%8C" data-v-8c9498c0>CU Writer</a>, a public domain word processor from 1989–1993, contains 55 bitmap fonts, which has now been extracted. They can be useful when displaying Thai text on a low-resolution screen or a low-DPI printer.</p><div style="filter:drop-shadow(2px 2px 0 #00000040);" class="rounded border bg-#252423 border-#656463 px-8" data-v-8c9498c0><p data-v-8c9498c0><img src="https://im.dt.in.th/ipfs/bafybeietvxywchbzih3wdnrnbxiupxlsrmrguk5s7o63aq2p4emgsfqznm/image.webp" alt="" data-v-8c9498c0></p></div><p data-v-8c9498c0>The source code and all the files can be found on GitHub.</p><p class="notes-cta" data-v-8c9498c0><a class="notes-cta__link" href="https://github.com/dtinth/cu-writer-fonts" data-v-8c9498c0><span class="notes-cta__title" data-v-8c9498c0>GitHub Repository</span><span class="notes-cta__url" data-v-8c9498c0>https://github.com/dtinth/cu-writer-fonts</span></a></p><h2 id="how-it-started" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#how-it-started" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>How it started</h2><p data-v-8c9498c0>It was a weird rabbit hole. I stumbled upon <a href="https://www.nstda.or.th/asean-india-dl/sites/default/files/20120713-thai-thud2.0.pdf" data-v-8c9498c0>a PDF file of a book printed in 1994</a>. It seems to feature a monospaced Thai typeface that I couldn’t find anywhere in modern times, yet it looks much better than all the modern monospaced Thai fonts I see nowadays.</p><figure class="framed" data-v-8c9498c0><p data-v-8c9498c0><img src="https://im.dt.in.th/ipfs/bafybeie7pmivetz3twqxvwgkftxlhnkubhe6zenr4w4s26k2y4h2uxove4/image.webp" alt="" data-v-8c9498c0></p></figure><p data-v-8c9498c0>However, the <span style="display:inline-block;font-size:2em;line-height:0.5em;transform:scaleY(0.5) translateY(0.333em);" data-v-8c9498c0>stretched text</span> reminds me of an old word processor called CU Writer, a freeware developed by Chulalongkorn University.</p><p data-v-8c9498c0>I have never used it; only saw its screenshot. Nevertheless, its stretched text kinda made an impression.</p><p data-v-8c9498c0><img src="https://archive.org/download/cu-writer/cw16.png" alt="" data-v-8c9498c0></p><p data-v-8c9498c0>…but its on-screen font doesn’t look like the one in the book at all. But whatever. I like obscure fonts, so I thought I would forget about the book for now, and try to extract all the fonts from CU Writer, and see what’s inside.</p><p data-v-8c9498c0>I’m also interested in bitmap fonts because <a href="FreeTypeJSBlackWhiteText" data-v-8c9498c0>I use a low-DPI label printer</a>, and bitmap fonts looks much better on it.</p><h2 id="inside-cu-writer-16" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#inside-cu-writer-16" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>Inside CU Writer 1.6</h2><p data-v-8c9498c0>The <a href="https://software.thaiware.com/download.php?id=1742" data-v-8c9498c0>software package</a> contains many font files in various file formats. 39 files, to be exact.</p><table data-v-8c9498c0><thead data-v-8c9498c0><tr data-v-8c9498c0><th data-v-8c9498c0>.FON</th><th data-v-8c9498c0>.PRN</th><th data-v-8c9498c0>.P24</th><th data-v-8c9498c0>.FNT</th></tr></thead><tbody data-v-8c9498c0><tr data-v-8c9498c0><td data-v-8c9498c0>NORMAL.FON</td><td data-v-8c9498c0>NORMAL.PRN</td><td data-v-8c9498c0>NORMAL.P24</td><td data-v-8c9498c0>CU_HP_10.FNT</td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>NORMAL2.FON</td><td data-v-8c9498c0>NORMAL2.PRN</td><td data-v-8c9498c0>NORMAL2.P24</td><td data-v-8c9498c0>CU_HP_12.FNT</td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>NORMAL3.FON</td><td data-v-8c9498c0>NORMAL3.PRN</td><td data-v-8c9498c0>NORMAL3.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>NORMAL4.FON</td><td data-v-8c9498c0>NORMAL4.PRN</td><td data-v-8c9498c0>NORMAL4.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0>NORMALS.PRN</td><td data-v-8c9498c0>NORMALS.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0>NORMALS2.PRN</td><td data-v-8c9498c0>NORMALS2.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0>NORMALS3.PRN</td><td data-v-8c9498c0>NORMALS3.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0>NORMALS4.PRN</td><td data-v-8c9498c0>NORMALS4.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>ITALIC.FON</td><td data-v-8c9498c0>ITALIC.PRN</td><td data-v-8c9498c0>ITALIC.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>ITALIC2.FON</td><td data-v-8c9498c0>ITALIC2.PRN</td><td data-v-8c9498c0>ITALIC2.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>ITALIC3.FON</td><td data-v-8c9498c0>ITALIC3.PRN</td><td data-v-8c9498c0>ITALIC3.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>ITALIC4.FON</td><td data-v-8c9498c0>ITALIC4.PRN</td><td data-v-8c9498c0>ITALIC4.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0>ITALICS.PRN</td><td data-v-8c9498c0>ITALICS.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0></td><td data-v-8c9498c0>ITALICS2.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0></td><td data-v-8c9498c0>ITALICS3.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0></td><td data-v-8c9498c0>ITALICS4.P24</td><td data-v-8c9498c0></td></tr></tbody></table><p data-v-8c9498c0>I could not find any information about these files. But thankfully, <a href="https://github.com/kytulendu/CW141" data-v-8c9498c0>the source code for CU Writer v1.41 is publicly available</a>. Unfortunately though, it contains less font and does not contain the <code data-v-8c9498c0>.FNT</code> files or the code to load them at all. So let’s start with what we have.</p><h2 id="the-fon-prn-and-p24-files" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#the-fon-prn-and-p24-files" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>The FON, PRN, and P24 files</h2><p data-v-8c9498c0>I asked Claude to help me with understanding the format.</p><p data-v-8c9498c0>I used <a href="https://continue.dev/" data-v-8c9498c0>Continue.dev</a> and fed the model with the source code.</p><div class="notes-bubble" data-author-position="right" data-v-8c9498c0><div class="notes-bubble__author" data-v-8c9498c0><span class="notes-bubble__me" data-v-8c9498c0>Me:</span></div><div class="notes-bubble__message" data-v-8c9498c0><p data-v-8c9498c0>what are the characteristics of the font files in this software? <br data-v-8c9498c0> there seem to be .fon, .prn, and .p24 files. <br data-v-8c9498c0> what do they mean?</p></div></div><div class="notes-bubble" data-author-position="left" data-v-8c9498c0><div class="notes-bubble__author" data-v-8c9498c0><!----></div><div class="notes-bubble__message" data-v-8c9498c0><p data-v-8c9498c0>Based on the code in CONVERT.C, we can infer the following about the different font file types:</p><ol data-v-8c9498c0><li data-v-8c9498c0><p data-v-8c9498c0>.fon files:</p><ul data-v-8c9498c0><li data-v-8c9498c0>Used for screen fonts</li><li data-v-8c9498c0>Loaded by the load_scr() function</li><li data-v-8c9498c0>Have dimensions of 8x20 pixels (X=8, Y=20)</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>.prn files:</p><ul data-v-8c9498c0><li data-v-8c9498c0>Used for printer fonts</li><li data-v-8c9498c0>Loaded by the load_prn() function</li><li data-v-8c9498c0>Have dimensions of 22x16 pixels (X=22, Y=16)</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>.p24 files:</p><ul data-v-8c9498c0><li data-v-8c9498c0>Used for 24-pin printer fonts</li><li data-v-8c9498c0>Loaded by the load_24() function</li><li data-v-8c9498c0>Have dimensions of 18x24 pixels (X=18, Y=24)</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>.FED files:</p><ul data-v-8c9498c0><li data-v-8c9498c0>Seem to be a generic font format used by this software</li><li data-v-8c9498c0>Loaded by the load_fed() function</li><li data-v-8c9498c0>Can have variable dimensions (X and Y are read from the file)</li></ul></li></ol><p data-v-8c9498c0>The file extensions likely indicate their intended use:</p><ul data-v-8c9498c0><li data-v-8c9498c0>.fon for screen display</li><li data-v-8c9498c0>.prn for standard printers</li><li data-v-8c9498c0>.p24 for 24-pin printers (which could produce higher quality output)</li></ul><p data-v-8c9498c0>The code includes functions to convert between these different formats, allowing the software to use fonts interchangeably across different output devices. Each format seems to store the font data in a slightly different way, optimized for its particular use case.</p></div></div><p data-v-8c9498c0>Since I’m interested in the higher-quality printer fonts, I decided to focus on the <code data-v-8c9498c0>.p24</code> files. So I dive in:</p><div class="notes-bubble" data-author-position="right" data-v-8c9498c0><div class="notes-bubble__author" data-v-8c9498c0><span class="notes-bubble__me" data-v-8c9498c0>Me:</span></div><div class="notes-bubble__message" data-v-8c9498c0><p data-v-8c9498c0>what&#39;s the structure of p24 files?</p></div></div><div class="notes-bubble" data-author-position="left" data-v-8c9498c0><div class="notes-bubble__author" data-v-8c9498c0><!----></div><div class="notes-bubble__message" data-v-8c9498c0><p data-v-8c9498c0>Based on the code in the <code data-v-8c9498c0>load_24()</code> function in CONVERT.C, we can determine the following about the format of a .p24 file:</p><ol data-v-8c9498c0><li data-v-8c9498c0><p data-v-8c9498c0>File size: The file length should be exactly 3 × 18 × (256 - 32) bytes.</p></li><li data-v-8c9498c0><p data-v-8c9498c0>Character set: It contains data for 224 characters (256 - 32), likely representing the printable ASCII characters.</p></li><li data-v-8c9498c0><p data-v-8c9498c0>Character dimensions: Each character is 18 pixels wide and 24 pixels high.</p></li><li data-v-8c9498c0><p data-v-8c9498c0>Data structure:</p><ul data-v-8c9498c0><li data-v-8c9498c0>Each character uses 3 * 18 = 54 bytes of data.</li><li data-v-8c9498c0>The data is stored as a bitmap, where each bit represents a pixel.</li><li data-v-8c9498c0>The 18 pixels of width are stored in 3 bytes (24 bits, with 6 unused bits per row).</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>Data conversion: The <code data-v-8c9498c0>con_24_to_fed()</code> function shows how the data is interpreted:</p><ul data-v-8c9498c0><li data-v-8c9498c0>Each group of 3 bytes represents one row of the character.</li><li data-v-8c9498c0>The bits are read from most significant to least significant within each byte.</li><li data-v-8c9498c0>24 such rows make up one character.</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>File order: Characters are stored sequentially, likely in ASCII order starting from character 32 (space).</p></li></ol><p data-v-8c9498c0>Here&#39;s a visual representation of how one character might be stored:</p><pre data-v-8c9498c0><code data-v-8c9498c0>Byte 1   Byte 2   Byte 3   (Row 1)
XXXXXXXX XXXXXXXX XXXXXX00
Byte 4   Byte 5   Byte 6   (Row 2)
XXXXXXXX XXXXXXXX XXXXXX00
...
Byte 52  Byte 53  Byte 54  (Row 24)
XXXXXXXX XXXXXXXX XXXXXX00
</code></pre><p data-v-8c9498c0>Where X represents a bit used for the character data, and 0 represents unused bits.</p><p data-v-8c9498c0>This format allows for efficient storage and retrieval of high-resolution character data suitable for 24-pin dot matrix printers, which were capable of producing higher quality output than standard 9-pin printers.</p></div></div><p data-v-8c9498c0>The information wasn’t entirely accurate. For example, all the bits are actually used. The 3 bytes represent 24 pixels from top to bottom, i.e. every 3 bytes represents a vertical slice of the bitmap. It took a bit of tinkering in <a href="Ruby" data-v-8c9498c0>Ruby</a> to figure this out:</p><figure class="framed" data-v-8c9498c0><p data-v-8c9498c0><img src="https://im.dt.in.th/ipfs/bafybeihwqg2lpyhx6vw5xmrdd3y35a6c5ntfceytjfzqexvehxqg2fazuu/image.webp" alt="" data-v-8c9498c0></p></figure><p data-v-8c9498c0>From the source code, each of these file types has its own loading function. Thankfully, they are all similar. The <code data-v-8c9498c0>.fon</code>, <code data-v-8c9498c0>.prn</code>, and <code data-v-8c9498c0>.p24</code> files contains just the bitmap data, and characters data is arranged sequentially. This makes it pretty easy to parse.</p><table class="n-table-bordered" data-v-8c9498c0><thead data-v-8c9498c0><tr data-v-8c9498c0><th width="25%" data-v-8c9498c0>File type</th><th width="25%" data-v-8c9498c0>FON</th><th width="25%" data-v-8c9498c0>PRN</th><th width="25%" data-v-8c9498c0>P24</th></tr></thead><tbody data-v-8c9498c0><tr data-v-8c9498c0><td data-v-8c9498c0>Number of glyphs</td><td colspan="2" data-v-8c9498c0>256</td><td data-v-8c9498c0>224</td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>Orientation</td><td data-v-8c9498c0>Left-to-right,<br data-v-8c9498c0>top-to-bottom</td><td colspan="2" data-v-8c9498c0>Top-to-bottom,<br data-v-8c9498c0>left-to-right</td></tr></tbody></table><h2 id="the-fnt-files" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#the-fnt-files" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>The FNT files</h2><p data-v-8c9498c0>Now, the <code data-v-8c9498c0>.fnt</code> files are different. These files are much larger than all the other files, and there are only two of them: <code data-v-8c9498c0>CU_HP_10.FNT</code> and <code data-v-8c9498c0>CU_HP_12.FNT</code>. Unfortunately, the source code does not contain any information about these files, so I had to make some (correct) guesses:</p><ul data-v-8c9498c0><li data-v-8c9498c0><p data-v-8c9498c0>These files are likely used for high-quality printing due to the “HP” in their names. This matches with <a href="https://th.wikipedia.org/wiki/%E0%B8%8B%E0%B8%B5%E0%B8%A2%E0%B8%B9%E0%B9%84%E0%B8%A3%E0%B9%80%E0%B8%95%E0%B8%AD%E0%B8%A3%E0%B9%8C" data-v-8c9498c0>this description from Wikipedia</a>, which describes that it works with 10 and 12 characters per inch printers by HP LaserJet.</p><blockquote data-v-8c9498c0><p data-v-8c9498c0>CUPRINT รุ่น 1.41 เดือนกรกฎาคม พ.ศ. 2534 ซึ่งสามารถพิมพ์ข้อความขนาด 10 และ 12 ตัวอักษรต่อนิ้ว และใช้กับเครื่องพิมพ์เอชพี เลเซอร์เจ็ท …</p></blockquote></li><li data-v-8c9498c0><p data-v-8c9498c0>They probably contain multiple fonts, as they are much larger than the other files and there are only two of them.</p></li></ul><p data-v-8c9498c0>With these assumption, let’s ask Claude for help with pattern recognition:</p><div class="notes-bubble" data-author-position="right" data-v-8c9498c0><div class="notes-bubble__author" data-v-8c9498c0><span class="notes-bubble__me" data-v-8c9498c0>Me:</span></div><div class="notes-bubble__message" data-v-8c9498c0><p data-v-8c9498c0>I have this binary file. It is a font file from a free word processor from 90&#39;s era. Can you help determine its structure?</p><pre data-v-8c9498c0><code data-v-8c9498c0>00000000: 1b2a 6330 441b 2973 3634 5700 4000 0200  .*c0D.)s64W.@...
00000010: 0000 2300 1e00 3200 0001 1500 7800 c800  ..#...2.....x...
00000020: 5400 0000 0700 0000 0002 0300 c800 6800  T.............h.
00000030: 0000 0000 0000 0000 0000 0053 616d 706c  ...........Sampl
00000040: 6520 466f 6e74 2030 3033 001b 2a63 3333  e Font 003..*c33
00000050: 451b 2873 3436 5704 000e 0100 0000 0b00  E.(s46W.........
00000060: 1d00 0800 1e00 783c 3c3c 3c3c 3c3c 3c3c  ......x&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
00000070: 3c3c 3c18 1818 1818 1818 1818 1818 0000  &lt;&lt;&lt;.............
00000080: 183c 7eff 7e1b 2a63 3334 451b 2873 3436  .&lt;~.~.*c34E.(s46
00000090: 5704 000e 0100 0000 0900 2200 0c00 0f00  W.........&quot;.....
000000a0: 78f0 f0f0 f0f0 f0f0 f0f0 f0f0 f0f0 f0f0  x...............
000000b0: f060 6060 6060 6060 6060 6060 6060 601b  .``````````````.
000000c0: 2a63 3335 451b 2873 3134 3057 0400 0e01  *c35E.(s140W....
000000d0: 0000 0002 001e 0019 001f 0078 0000 6000  ...........x..`.
000000e0: 00c0 e000 01c0 e000 01c0 e000 01c0 e000  ................
000000f0: 01c0 e000 01c0 e000 01c0 e000 01c0 ef80  ................
</code></pre></div></div><div class="notes-bubble" data-author-position="left" data-v-8c9498c0><div class="notes-bubble__author" data-v-8c9498c0><!----></div><div class="notes-bubble__message" data-v-8c9498c0><p data-v-8c9498c0>Based on the binary data you&#39;ve provided, this appears to be a proprietary font file format from a 1990s word processor. While I can&#39;t provide a complete breakdown of the format without more information, I can offer some observations and potential structure elements:</p><ol data-v-8c9498c0><li data-v-8c9498c0><p data-v-8c9498c0>File Header: The file starts with &quot;1b2a6330441b2973363457&quot;, which could be a signature or identifier for this font format.</p></li><li data-v-8c9498c0><p data-v-8c9498c0>Font Metadata:</p><ul data-v-8c9498c0><li data-v-8c9498c0>There&#39;s a string &quot;Sample Font 003&quot; at offset 0x34, which is likely the font name.</li><li data-v-8c9498c0>Various numeric values in the first few bytes could represent metadata like version, character count, or other font properties.</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>Character Data:</p><ul data-v-8c9498c0><li data-v-8c9498c0>The file seems to contain multiple sections, each potentially representing different characters or glyphs.</li><li data-v-8c9498c0>Each section appears to start with a header like &quot;1b2a63XXXX1b28sYYYYW&quot;, where XXXX and YYYY are varying numbers.</li><li data-v-8c9498c0>Following these headers are blocks of data that likely represent the bitmap or vector data for each character.</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>Encoding:</p><ul data-v-8c9498c0><li data-v-8c9498c0>The data uses a mix of ASCII-readable text and binary data.</li><li data-v-8c9498c0>Some sections contain repeating patterns (like the &#39;&lt;&#39; characters or &#39;x&#39; characters), which might represent simple bitmap data for certain glyphs.</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>Possible Structure:</p><ul data-v-8c9498c0><li data-v-8c9498c0>File Header</li><li data-v-8c9498c0>Font Metadata</li><li data-v-8c9498c0>Character Count or Glyph Index</li><li data-v-8c9498c0>For each character: <ul data-v-8c9498c0><li data-v-8c9498c0>Character Header</li><li data-v-8c9498c0>Character Data (bitmap or vector)</li></ul></li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>Compression:</p><ul data-v-8c9498c0><li data-v-8c9498c0>Some sections show patterns that might indicate simple run-length encoding or other basic compression techniques.</li></ul></li></ol><p data-v-8c9498c0>To fully understand this format, you would need:</p><ol data-v-8c9498c0><li data-v-8c9498c0>Documentation from the original word processor.</li><li data-v-8c9498c0>Multiple font files of this type to compare.</li><li data-v-8c9498c0>Potentially, the source code or a working version of the word processor that can read these fonts.</li></ol><p data-v-8c9498c0>If you have access to the original software or more files of this type, that could help in further analysis. Reverse engineering proprietary formats without documentation can be challenging and time-consuming.</p></div></div><p data-v-8c9498c0>The information wasn’t entirely accurate<sup data-v-8c9498c0><a href="#user-content-fn-e1" id="user-content-fnref-e1" data-footnote-ref="" aria-describedby="footnote-label" data-v-8c9498c0>1</a></sup>, but was enough for me to continue my exploration. I used <a href="https://imhex.werwolv.net/" data-v-8c9498c0>ImHex</a> to view the binary data and, after some time, was able to decode it. I won’t go into the details (you can check out <a href="https://github.com/dtinth/cu-writer-fonts/blob/main/src/hp.ts" data-v-8c9498c0>hp.ts</a> for that), but it contains a repeating patterns throughout the file.</p><details data-v-8c9498c0><summary data-v-8c9498c0>Pattern description</summary><p data-v-8c9498c0><strong data-v-8c9498c0>Convention:</strong></p><ul data-v-8c9498c0><li data-v-8c9498c0>Hexadecimal numbers represent raw bytes.</li><li data-v-8c9498c0>N represents a number encoded in ASCII. For example, the number 24 is encoded as hex <strong data-v-8c9498c0><code data-v-8c9498c0>32 34</code></strong>.</li><li data-v-8c9498c0>Quoted strings represent ASCII-encoded text.</li></ul><p data-v-8c9498c0><strong data-v-8c9498c0>Pattern:</strong></p><ul data-v-8c9498c0><li data-v-8c9498c0><strong data-v-8c9498c0><code data-v-8c9498c0>1B &quot;*c&quot; N &quot;D&quot;</code></strong><ul data-v-8c9498c0><li data-v-8c9498c0>This seems to denote the start of the Nth font. For example <code data-v-8c9498c0>1B &quot;*c0D&quot;</code> means font number 0.</li></ul></li><li data-v-8c9498c0><strong data-v-8c9498c0><code data-v-8c9498c0>1B &quot;)s&quot; N &quot;W&quot;</code></strong> followed by N bytes of payload <ul data-v-8c9498c0><li data-v-8c9498c0>The payload seems to contains information about the font, including the font name. I haven’t looked into it.</li></ul></li><li data-v-8c9498c0><strong data-v-8c9498c0><code data-v-8c9498c0>1B &quot;*c&quot; N &quot;E&quot;</code></strong><ul data-v-8c9498c0><li data-v-8c9498c0>This seems to denote the character number N. For example <code data-v-8c9498c0>1B &quot;*c33E&quot;</code> means character number 33.</li></ul></li><li data-v-8c9498c0><strong data-v-8c9498c0><code data-v-8c9498c0>1B &quot;(s&quot; N &quot;W&quot;</code></strong> followed by N bytes of payload <ul data-v-8c9498c0><li data-v-8c9498c0>This is the character data.</li><li data-v-8c9498c0>The payload contains: <ul data-v-8c9498c0><li data-v-8c9498c0>16 bytes of header in binary. I haven’t looked into it yet, but the <code data-v-8c9498c0>payload[13]</code> contains the width of the bitmap data.</li><li data-v-8c9498c0>The rest of the data is the bitmap data of the character, 1 bit per pixel.</li></ul></li></ul></li></ul></details><p data-v-8c9498c0>With that, I converted all the fonts into JSON files. Then I created an HTML page that loads these JSON file and turns them into a bitmap font. All the code is in the GitHub repo, so you can check it out:</p><p class="notes-cta" data-v-8c9498c0><a class="notes-cta__link" href="https://github.com/dtinth/cu-writer-fonts" data-v-8c9498c0><span class="notes-cta__title" data-v-8c9498c0>GitHub Repository</span><span class="notes-cta__url" data-v-8c9498c0>https://github.com/dtinth/cu-writer-fonts</span></a></p><p data-v-8c9498c0>By the way, if you are interested in old-school PC fonts, while researching I also stumbled upon <a href="https://int10h.org/oldschool-pc-fonts/" data-v-8c9498c0>The Oldschool PC Font Resource</a> which has tons of old fonts.</p><h2 id="found-it" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#found-it" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>Found it</h2><p data-v-8c9498c0>Indeed, the book mentioned at the beginning seems to use one of the fonts from CU Writer.</p><img src="https://im.dt.in.th/ipfs/bafybeihuypsfebcuvwrq2ejavdhicwrru7xg5qndouvdiovdkbzwpe4x34/image.webp" style="filter:invert(1);mix-blend-mode:screen;" data-v-8c9498c0><section data-footnotes="" class="footnotes" data-v-8c9498c0><h2 id="footnote-label" class="sr-only" data-v-8c9498c0><a aria-hidden="true" tabindex="-1" href="#footnote-label" data-v-8c9498c0><span class="icon icon-link" data-v-8c9498c0></span></a>Footnotes</h2><ol data-v-8c9498c0><li id="user-content-fn-e1" data-v-8c9498c0><p data-v-8c9498c0>For example, there is no file header (but font headers exist), and there is no run-length encoding used. <a href="#user-content-fnref-e1" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref" data-v-8c9498c0>↩</a></p></li></ol></section><!--]--></div>
        </div>
      </main>
      <footer>
        <div
          class="notes-layout-container mx-auto py-4 px-6 text-#8b8685 text-right text-sm"
          id="footerContents"
        >
          <notes-page-footer></notes-page-footer>
        </div>
      </footer>
    </div>
    <script>
window.precompiledNoteBehavior = function(require, exports, module, Vue) {"use strict";Object.defineProperty(exports, "__esModule", {value: true});const __sfc__ = {};
var _vue = require('vue');

const _withScopeId = n => (_vue.pushScopeId.call(void 0, "data-v-8c9498c0"),n=n(),_vue.popScopeId.call(void 0, ),n)
const _hoisted_1 = /*#__PURE__*/_vue.createStaticVNode.call(void 0, "<h1 id=\"all-the-fonts-from-cu-writer\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#all-the-fonts-from-cu-writer\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>All the fonts from CU Writer</h1><p data-v-8c9498c0><a href=\"https://th.wikipedia.org/wiki/%E0%B8%8B%E0%B8%B5%E0%B8%A2%E0%B8%B9%E0%B9%84%E0%B8%A3%E0%B9%80%E0%B8%95%E0%B8%AD%E0%B8%A3%E0%B9%8C\" data-v-8c9498c0>CU Writer</a>, a public domain word processor from 1989–1993, contains 55 bitmap fonts, which has now been extracted. They can be useful when displaying Thai text on a low-resolution screen or a low-DPI printer.</p><div style=\"filter:drop-shadow(2px 2px 0 #00000040);\" class=\"rounded border bg-#252423 border-#656463 px-8\" data-v-8c9498c0><p data-v-8c9498c0><img src=\"https://im.dt.in.th/ipfs/bafybeietvxywchbzih3wdnrnbxiupxlsrmrguk5s7o63aq2p4emgsfqznm/image.webp\" alt=\"\" data-v-8c9498c0></p></div><p data-v-8c9498c0>The source code and all the files can be found on GitHub.</p><p class=\"notes-cta\" data-v-8c9498c0><a class=\"notes-cta__link\" href=\"https://github.com/dtinth/cu-writer-fonts\" data-v-8c9498c0><span class=\"notes-cta__title\" data-v-8c9498c0>GitHub Repository</span><span class=\"notes-cta__url\" data-v-8c9498c0>https://github.com/dtinth/cu-writer-fonts</span></a></p><h2 id=\"how-it-started\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#how-it-started\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>How it started</h2><p data-v-8c9498c0>It was a weird rabbit hole. I stumbled upon <a href=\"https://www.nstda.or.th/asean-india-dl/sites/default/files/20120713-thai-thud2.0.pdf\" data-v-8c9498c0>a PDF file of a book printed in 1994</a>. It seems to feature a monospaced Thai typeface that I couldn’t find anywhere in modern times, yet it looks much better than all the modern monospaced Thai fonts I see nowadays.</p><figure class=\"framed\" data-v-8c9498c0><p data-v-8c9498c0><img src=\"https://im.dt.in.th/ipfs/bafybeie7pmivetz3twqxvwgkftxlhnkubhe6zenr4w4s26k2y4h2uxove4/image.webp\" alt=\"\" data-v-8c9498c0></p></figure><p data-v-8c9498c0>However, the <span style=\"display:inline-block;font-size:2em;line-height:0.5em;transform:scaleY(0.5) translateY(0.333em);\" data-v-8c9498c0>stretched text</span> reminds me of an old word processor called CU Writer, a freeware developed by Chulalongkorn University.</p><p data-v-8c9498c0>I have never used it; only saw its screenshot. Nevertheless, its stretched text kinda made an impression.</p><p data-v-8c9498c0><img src=\"https://archive.org/download/cu-writer/cw16.png\" alt=\"\" data-v-8c9498c0></p><p data-v-8c9498c0>…but its on-screen font doesn’t look like the one in the book at all. But whatever. I like obscure fonts, so I thought I would forget about the book for now, and try to extract all the fonts from CU Writer, and see what’s inside.</p><p data-v-8c9498c0>I’m also interested in bitmap fonts because <a href=\"FreeTypeJSBlackWhiteText\" data-v-8c9498c0>I use a low-DPI label printer</a>, and bitmap fonts looks much better on it.</p><h2 id=\"inside-cu-writer-16\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#inside-cu-writer-16\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>Inside CU Writer 1.6</h2><p data-v-8c9498c0>The <a href=\"https://software.thaiware.com/download.php?id=1742\" data-v-8c9498c0>software package</a> contains many font files in various file formats. 39 files, to be exact.</p><table data-v-8c9498c0><thead data-v-8c9498c0><tr data-v-8c9498c0><th data-v-8c9498c0>.FON</th><th data-v-8c9498c0>.PRN</th><th data-v-8c9498c0>.P24</th><th data-v-8c9498c0>.FNT</th></tr></thead><tbody data-v-8c9498c0><tr data-v-8c9498c0><td data-v-8c9498c0>NORMAL.FON</td><td data-v-8c9498c0>NORMAL.PRN</td><td data-v-8c9498c0>NORMAL.P24</td><td data-v-8c9498c0>CU_HP_10.FNT</td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>NORMAL2.FON</td><td data-v-8c9498c0>NORMAL2.PRN</td><td data-v-8c9498c0>NORMAL2.P24</td><td data-v-8c9498c0>CU_HP_12.FNT</td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>NORMAL3.FON</td><td data-v-8c9498c0>NORMAL3.PRN</td><td data-v-8c9498c0>NORMAL3.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>NORMAL4.FON</td><td data-v-8c9498c0>NORMAL4.PRN</td><td data-v-8c9498c0>NORMAL4.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0>NORMALS.PRN</td><td data-v-8c9498c0>NORMALS.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0>NORMALS2.PRN</td><td data-v-8c9498c0>NORMALS2.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0>NORMALS3.PRN</td><td data-v-8c9498c0>NORMALS3.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0>NORMALS4.PRN</td><td data-v-8c9498c0>NORMALS4.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>ITALIC.FON</td><td data-v-8c9498c0>ITALIC.PRN</td><td data-v-8c9498c0>ITALIC.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>ITALIC2.FON</td><td data-v-8c9498c0>ITALIC2.PRN</td><td data-v-8c9498c0>ITALIC2.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>ITALIC3.FON</td><td data-v-8c9498c0>ITALIC3.PRN</td><td data-v-8c9498c0>ITALIC3.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>ITALIC4.FON</td><td data-v-8c9498c0>ITALIC4.PRN</td><td data-v-8c9498c0>ITALIC4.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0>ITALICS.PRN</td><td data-v-8c9498c0>ITALICS.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0></td><td data-v-8c9498c0>ITALICS2.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0></td><td data-v-8c9498c0>ITALICS3.P24</td><td data-v-8c9498c0></td></tr><tr data-v-8c9498c0><td data-v-8c9498c0></td><td data-v-8c9498c0></td><td data-v-8c9498c0>ITALICS4.P24</td><td data-v-8c9498c0></td></tr></tbody></table><p data-v-8c9498c0>I could not find any information about these files. But thankfully, <a href=\"https://github.com/kytulendu/CW141\" data-v-8c9498c0>the source code for CU Writer v1.41 is publicly available</a>. Unfortunately though, it contains less font and does not contain the <code data-v-8c9498c0>.FNT</code> files or the code to load them at all. So let’s start with what we have.</p><h2 id=\"the-fon-prn-and-p24-files\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#the-fon-prn-and-p24-files\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>The FON, PRN, and P24 files</h2><p data-v-8c9498c0>I asked Claude to help me with understanding the format.</p><p data-v-8c9498c0>I used <a href=\"https://continue.dev/\" data-v-8c9498c0>Continue.dev</a> and fed the model with the source code.</p><div class=\"notes-bubble\" data-author-position=\"right\" data-v-8c9498c0><div class=\"notes-bubble__author\" data-v-8c9498c0><span class=\"notes-bubble__me\" data-v-8c9498c0>Me:</span></div><div class=\"notes-bubble__message\" data-v-8c9498c0><p data-v-8c9498c0>what are the characteristics of the font files in this software? <br data-v-8c9498c0> there seem to be .fon, .prn, and .p24 files. <br data-v-8c9498c0> what do they mean?</p></div></div>", 21)
const _hoisted_22 = {
  class: "notes-bubble",
  "data-author-position": "left"
}
const _hoisted_23 = { class: "notes-bubble__author" }
const _hoisted_24 = /*#__PURE__*/_vue.createStaticVNode.call(void 0, "<div class=\"notes-bubble__message\" data-v-8c9498c0><p data-v-8c9498c0>Based on the code in CONVERT.C, we can infer the following about the different font file types:</p><ol data-v-8c9498c0><li data-v-8c9498c0><p data-v-8c9498c0>.fon files:</p><ul data-v-8c9498c0><li data-v-8c9498c0>Used for screen fonts</li><li data-v-8c9498c0>Loaded by the load_scr() function</li><li data-v-8c9498c0>Have dimensions of 8x20 pixels (X=8, Y=20)</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>.prn files:</p><ul data-v-8c9498c0><li data-v-8c9498c0>Used for printer fonts</li><li data-v-8c9498c0>Loaded by the load_prn() function</li><li data-v-8c9498c0>Have dimensions of 22x16 pixels (X=22, Y=16)</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>.p24 files:</p><ul data-v-8c9498c0><li data-v-8c9498c0>Used for 24-pin printer fonts</li><li data-v-8c9498c0>Loaded by the load_24() function</li><li data-v-8c9498c0>Have dimensions of 18x24 pixels (X=18, Y=24)</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>.FED files:</p><ul data-v-8c9498c0><li data-v-8c9498c0>Seem to be a generic font format used by this software</li><li data-v-8c9498c0>Loaded by the load_fed() function</li><li data-v-8c9498c0>Can have variable dimensions (X and Y are read from the file)</li></ul></li></ol><p data-v-8c9498c0>The file extensions likely indicate their intended use:</p><ul data-v-8c9498c0><li data-v-8c9498c0>.fon for screen display</li><li data-v-8c9498c0>.prn for standard printers</li><li data-v-8c9498c0>.p24 for 24-pin printers (which could produce higher quality output)</li></ul><p data-v-8c9498c0>The code includes functions to convert between these different formats, allowing the software to use fonts interchangeably across different output devices. Each format seems to store the font data in a slightly different way, optimized for its particular use case.</p></div>", 1)
const _hoisted_25 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_vue.createElementVNode.call(void 0, "p", null, [
  /*#__PURE__*/_vue.createTextVNode.call(void 0, "Since I’m interested in the higher-quality printer fonts, I decided to focus on the "),
  /*#__PURE__*/_vue.createElementVNode.call(void 0, "code", null, ".p24"),
  /*#__PURE__*/_vue.createTextVNode.call(void 0, " files. So I dive in:")
], -1 /* HOISTED */))
const _hoisted_26 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_vue.createElementVNode.call(void 0, "div", {
  class: "notes-bubble",
  "data-author-position": "right"
}, [
  /*#__PURE__*/_vue.createElementVNode.call(void 0, "div", { class: "notes-bubble__author" }, [
    /*#__PURE__*/_vue.createElementVNode.call(void 0, "span", { class: "notes-bubble__me" }, "Me:")
  ]),
  /*#__PURE__*/_vue.createElementVNode.call(void 0, "div", { class: "notes-bubble__message" }, [
    /*#__PURE__*/_vue.createElementVNode.call(void 0, "p", null, "what's the structure of p24 files?")
  ])
], -1 /* HOISTED */))
const _hoisted_27 = {
  class: "notes-bubble",
  "data-author-position": "left"
}
const _hoisted_28 = { class: "notes-bubble__author" }
const _hoisted_29 = /*#__PURE__*/_vue.createStaticVNode.call(void 0, "<div class=\"notes-bubble__message\" data-v-8c9498c0><p data-v-8c9498c0>Based on the code in the <code data-v-8c9498c0>load_24()</code> function in CONVERT.C, we can determine the following about the format of a .p24 file:</p><ol data-v-8c9498c0><li data-v-8c9498c0><p data-v-8c9498c0>File size: The file length should be exactly 3 × 18 × (256 - 32) bytes.</p></li><li data-v-8c9498c0><p data-v-8c9498c0>Character set: It contains data for 224 characters (256 - 32), likely representing the printable ASCII characters.</p></li><li data-v-8c9498c0><p data-v-8c9498c0>Character dimensions: Each character is 18 pixels wide and 24 pixels high.</p></li><li data-v-8c9498c0><p data-v-8c9498c0>Data structure:</p><ul data-v-8c9498c0><li data-v-8c9498c0>Each character uses 3 * 18 = 54 bytes of data.</li><li data-v-8c9498c0>The data is stored as a bitmap, where each bit represents a pixel.</li><li data-v-8c9498c0>The 18 pixels of width are stored in 3 bytes (24 bits, with 6 unused bits per row).</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>Data conversion: The <code data-v-8c9498c0>con_24_to_fed()</code> function shows how the data is interpreted:</p><ul data-v-8c9498c0><li data-v-8c9498c0>Each group of 3 bytes represents one row of the character.</li><li data-v-8c9498c0>The bits are read from most significant to least significant within each byte.</li><li data-v-8c9498c0>24 such rows make up one character.</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>File order: Characters are stored sequentially, likely in ASCII order starting from character 32 (space).</p></li></ol><p data-v-8c9498c0>Here&#39;s a visual representation of how one character might be stored:</p><pre data-v-8c9498c0><code data-v-8c9498c0>Byte 1   Byte 2   Byte 3   (Row 1)\nXXXXXXXX XXXXXXXX XXXXXX00\nByte 4   Byte 5   Byte 6   (Row 2)\nXXXXXXXX XXXXXXXX XXXXXX00\n...\nByte 52  Byte 53  Byte 54  (Row 24)\nXXXXXXXX XXXXXXXX XXXXXX00\n</code></pre><p data-v-8c9498c0>Where X represents a bit used for the character data, and 0 represents unused bits.</p><p data-v-8c9498c0>This format allows for efficient storage and retrieval of high-resolution character data suitable for 24-pin dot matrix printers, which were capable of producing higher quality output than standard 9-pin printers.</p></div>", 1)
const _hoisted_30 = /*#__PURE__*/_vue.createStaticVNode.call(void 0, "<p data-v-8c9498c0>The information wasn’t entirely accurate. For example, all the bits are actually used. The 3 bytes represent 24 pixels from top to bottom, i.e. every 3 bytes represents a vertical slice of the bitmap. It took a bit of tinkering in <a href=\"Ruby\" data-v-8c9498c0>Ruby</a> to figure this out:</p><figure class=\"framed\" data-v-8c9498c0><p data-v-8c9498c0><img src=\"https://im.dt.in.th/ipfs/bafybeihwqg2lpyhx6vw5xmrdd3y35a6c5ntfceytjfzqexvehxqg2fazuu/image.webp\" alt=\"\" data-v-8c9498c0></p></figure><p data-v-8c9498c0>From the source code, each of these file types has its own loading function. Thankfully, they are all similar. The <code data-v-8c9498c0>.fon</code>, <code data-v-8c9498c0>.prn</code>, and <code data-v-8c9498c0>.p24</code> files contains just the bitmap data, and characters data is arranged sequentially. This makes it pretty easy to parse.</p><table class=\"n-table-bordered\" data-v-8c9498c0><thead data-v-8c9498c0><tr data-v-8c9498c0><th width=\"25%\" data-v-8c9498c0>File type</th><th width=\"25%\" data-v-8c9498c0>FON</th><th width=\"25%\" data-v-8c9498c0>PRN</th><th width=\"25%\" data-v-8c9498c0>P24</th></tr></thead><tbody data-v-8c9498c0><tr data-v-8c9498c0><td data-v-8c9498c0>Number of glyphs</td><td colspan=\"2\" data-v-8c9498c0>256</td><td data-v-8c9498c0>224</td></tr><tr data-v-8c9498c0><td data-v-8c9498c0>Orientation</td><td data-v-8c9498c0>Left-to-right,<br data-v-8c9498c0>top-to-bottom</td><td colspan=\"2\" data-v-8c9498c0>Top-to-bottom,<br data-v-8c9498c0>left-to-right</td></tr></tbody></table><h2 id=\"the-fnt-files\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#the-fnt-files\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>The FNT files</h2><p data-v-8c9498c0>Now, the <code data-v-8c9498c0>.fnt</code> files are different. These files are much larger than all the other files, and there are only two of them: <code data-v-8c9498c0>CU_HP_10.FNT</code> and <code data-v-8c9498c0>CU_HP_12.FNT</code>. Unfortunately, the source code does not contain any information about these files, so I had to make some (correct) guesses:</p><ul data-v-8c9498c0><li data-v-8c9498c0><p data-v-8c9498c0>These files are likely used for high-quality printing due to the “HP” in their names. This matches with <a href=\"https://th.wikipedia.org/wiki/%E0%B8%8B%E0%B8%B5%E0%B8%A2%E0%B8%B9%E0%B9%84%E0%B8%A3%E0%B9%80%E0%B8%95%E0%B8%AD%E0%B8%A3%E0%B9%8C\" data-v-8c9498c0>this description from Wikipedia</a>, which describes that it works with 10 and 12 characters per inch printers by HP LaserJet.</p><blockquote data-v-8c9498c0><p data-v-8c9498c0>CUPRINT รุ่น 1.41 เดือนกรกฎาคม พ.ศ. 2534 ซึ่งสามารถพิมพ์ข้อความขนาด 10 และ 12 ตัวอักษรต่อนิ้ว และใช้กับเครื่องพิมพ์เอชพี เลเซอร์เจ็ท …</p></blockquote></li><li data-v-8c9498c0><p data-v-8c9498c0>They probably contain multiple fonts, as they are much larger than the other files and there are only two of them.</p></li></ul><p data-v-8c9498c0>With these assumption, let’s ask Claude for help with pattern recognition:</p><div class=\"notes-bubble\" data-author-position=\"right\" data-v-8c9498c0><div class=\"notes-bubble__author\" data-v-8c9498c0><span class=\"notes-bubble__me\" data-v-8c9498c0>Me:</span></div><div class=\"notes-bubble__message\" data-v-8c9498c0><p data-v-8c9498c0>I have this binary file. It is a font file from a free word processor from 90&#39;s era. Can you help determine its structure?</p><pre data-v-8c9498c0><code data-v-8c9498c0>00000000: 1b2a 6330 441b 2973 3634 5700 4000 0200  .*c0D.)s64W.@...\n00000010: 0000 2300 1e00 3200 0001 1500 7800 c800  ..#...2.....x...\n00000020: 5400 0000 0700 0000 0002 0300 c800 6800  T.............h.\n00000030: 0000 0000 0000 0000 0000 0053 616d 706c  ...........Sampl\n00000040: 6520 466f 6e74 2030 3033 001b 2a63 3333  e Font 003..*c33\n00000050: 451b 2873 3436 5704 000e 0100 0000 0b00  E.(s46W.........\n00000060: 1d00 0800 1e00 783c 3c3c 3c3c 3c3c 3c3c  ......x&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n00000070: 3c3c 3c18 1818 1818 1818 1818 1818 0000  &lt;&lt;&lt;.............\n00000080: 183c 7eff 7e1b 2a63 3334 451b 2873 3436  .&lt;~.~.*c34E.(s46\n00000090: 5704 000e 0100 0000 0900 2200 0c00 0f00  W.........&quot;.....\n000000a0: 78f0 f0f0 f0f0 f0f0 f0f0 f0f0 f0f0 f0f0  x...............\n000000b0: f060 6060 6060 6060 6060 6060 6060 601b  .``````````````.\n000000c0: 2a63 3335 451b 2873 3134 3057 0400 0e01  *c35E.(s140W....\n000000d0: 0000 0002 001e 0019 001f 0078 0000 6000  ...........x..`.\n000000e0: 00c0 e000 01c0 e000 01c0 e000 01c0 e000  ................\n000000f0: 01c0 e000 01c0 e000 01c0 e000 01c0 ef80  ................\n</code></pre></div></div>", 9)
const _hoisted_39 = {
  class: "notes-bubble",
  "data-author-position": "left"
}
const _hoisted_40 = { class: "notes-bubble__author" }
const _hoisted_41 = /*#__PURE__*/_vue.createStaticVNode.call(void 0, "<div class=\"notes-bubble__message\" data-v-8c9498c0><p data-v-8c9498c0>Based on the binary data you&#39;ve provided, this appears to be a proprietary font file format from a 1990s word processor. While I can&#39;t provide a complete breakdown of the format without more information, I can offer some observations and potential structure elements:</p><ol data-v-8c9498c0><li data-v-8c9498c0><p data-v-8c9498c0>File Header: The file starts with &quot;1b2a6330441b2973363457&quot;, which could be a signature or identifier for this font format.</p></li><li data-v-8c9498c0><p data-v-8c9498c0>Font Metadata:</p><ul data-v-8c9498c0><li data-v-8c9498c0>There&#39;s a string &quot;Sample Font 003&quot; at offset 0x34, which is likely the font name.</li><li data-v-8c9498c0>Various numeric values in the first few bytes could represent metadata like version, character count, or other font properties.</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>Character Data:</p><ul data-v-8c9498c0><li data-v-8c9498c0>The file seems to contain multiple sections, each potentially representing different characters or glyphs.</li><li data-v-8c9498c0>Each section appears to start with a header like &quot;1b2a63XXXX1b28sYYYYW&quot;, where XXXX and YYYY are varying numbers.</li><li data-v-8c9498c0>Following these headers are blocks of data that likely represent the bitmap or vector data for each character.</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>Encoding:</p><ul data-v-8c9498c0><li data-v-8c9498c0>The data uses a mix of ASCII-readable text and binary data.</li><li data-v-8c9498c0>Some sections contain repeating patterns (like the &#39;&lt;&#39; characters or &#39;x&#39; characters), which might represent simple bitmap data for certain glyphs.</li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>Possible Structure:</p><ul data-v-8c9498c0><li data-v-8c9498c0>File Header</li><li data-v-8c9498c0>Font Metadata</li><li data-v-8c9498c0>Character Count or Glyph Index</li><li data-v-8c9498c0>For each character: <ul data-v-8c9498c0><li data-v-8c9498c0>Character Header</li><li data-v-8c9498c0>Character Data (bitmap or vector)</li></ul></li></ul></li><li data-v-8c9498c0><p data-v-8c9498c0>Compression:</p><ul data-v-8c9498c0><li data-v-8c9498c0>Some sections show patterns that might indicate simple run-length encoding or other basic compression techniques.</li></ul></li></ol><p data-v-8c9498c0>To fully understand this format, you would need:</p><ol data-v-8c9498c0><li data-v-8c9498c0>Documentation from the original word processor.</li><li data-v-8c9498c0>Multiple font files of this type to compare.</li><li data-v-8c9498c0>Potentially, the source code or a working version of the word processor that can read these fonts.</li></ol><p data-v-8c9498c0>If you have access to the original software or more files of this type, that could help in further analysis. Reverse engineering proprietary formats without documentation can be challenging and time-consuming.</p></div>", 1)
const _hoisted_42 = /*#__PURE__*/_vue.createStaticVNode.call(void 0, "<p data-v-8c9498c0>The information wasn’t entirely accurate<sup data-v-8c9498c0><a href=\"#user-content-fn-e1\" id=\"user-content-fnref-e1\" data-footnote-ref=\"\" aria-describedby=\"footnote-label\" data-v-8c9498c0>1</a></sup>, but was enough for me to continue my exploration. I used <a href=\"https://imhex.werwolv.net/\" data-v-8c9498c0>ImHex</a> to view the binary data and, after some time, was able to decode it. I won’t go into the details (you can check out <a href=\"https://github.com/dtinth/cu-writer-fonts/blob/main/src/hp.ts\" data-v-8c9498c0>hp.ts</a> for that), but it contains a repeating patterns throughout the file.</p><details data-v-8c9498c0><summary data-v-8c9498c0>Pattern description</summary><p data-v-8c9498c0><strong data-v-8c9498c0>Convention:</strong></p><ul data-v-8c9498c0><li data-v-8c9498c0>Hexadecimal numbers represent raw bytes.</li><li data-v-8c9498c0>N represents a number encoded in ASCII. For example, the number 24 is encoded as hex <strong data-v-8c9498c0><code data-v-8c9498c0>32 34</code></strong>.</li><li data-v-8c9498c0>Quoted strings represent ASCII-encoded text.</li></ul><p data-v-8c9498c0><strong data-v-8c9498c0>Pattern:</strong></p><ul data-v-8c9498c0><li data-v-8c9498c0><strong data-v-8c9498c0><code data-v-8c9498c0>1B &quot;*c&quot; N &quot;D&quot;</code></strong><ul data-v-8c9498c0><li data-v-8c9498c0>This seems to denote the start of the Nth font. For example <code data-v-8c9498c0>1B &quot;*c0D&quot;</code> means font number 0.</li></ul></li><li data-v-8c9498c0><strong data-v-8c9498c0><code data-v-8c9498c0>1B &quot;)s&quot; N &quot;W&quot;</code></strong> followed by N bytes of payload <ul data-v-8c9498c0><li data-v-8c9498c0>The payload seems to contains information about the font, including the font name. I haven’t looked into it.</li></ul></li><li data-v-8c9498c0><strong data-v-8c9498c0><code data-v-8c9498c0>1B &quot;*c&quot; N &quot;E&quot;</code></strong><ul data-v-8c9498c0><li data-v-8c9498c0>This seems to denote the character number N. For example <code data-v-8c9498c0>1B &quot;*c33E&quot;</code> means character number 33.</li></ul></li><li data-v-8c9498c0><strong data-v-8c9498c0><code data-v-8c9498c0>1B &quot;(s&quot; N &quot;W&quot;</code></strong> followed by N bytes of payload <ul data-v-8c9498c0><li data-v-8c9498c0>This is the character data.</li><li data-v-8c9498c0>The payload contains: <ul data-v-8c9498c0><li data-v-8c9498c0>16 bytes of header in binary. I haven’t looked into it yet, but the <code data-v-8c9498c0>payload[13]</code> contains the width of the bitmap data.</li><li data-v-8c9498c0>The rest of the data is the bitmap data of the character, 1 bit per pixel.</li></ul></li></ul></li></ul></details><p data-v-8c9498c0>With that, I converted all the fonts into JSON files. Then I created an HTML page that loads these JSON file and turns them into a bitmap font. All the code is in the GitHub repo, so you can check it out:</p><p class=\"notes-cta\" data-v-8c9498c0><a class=\"notes-cta__link\" href=\"https://github.com/dtinth/cu-writer-fonts\" data-v-8c9498c0><span class=\"notes-cta__title\" data-v-8c9498c0>GitHub Repository</span><span class=\"notes-cta__url\" data-v-8c9498c0>https://github.com/dtinth/cu-writer-fonts</span></a></p><p data-v-8c9498c0>By the way, if you are interested in old-school PC fonts, while researching I also stumbled upon <a href=\"https://int10h.org/oldschool-pc-fonts/\" data-v-8c9498c0>The Oldschool PC Font Resource</a> which has tons of old fonts.</p><h2 id=\"found-it\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#found-it\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>Found it</h2><p data-v-8c9498c0>Indeed, the book mentioned at the beginning seems to use one of the fonts from CU Writer.</p><img src=\"https://im.dt.in.th/ipfs/bafybeihuypsfebcuvwrq2ejavdhicwrru7xg5qndouvdiovdkbzwpe4x34/image.webp\" style=\"filter:invert(1);mix-blend-mode:screen;\" data-v-8c9498c0><section data-footnotes=\"\" class=\"footnotes\" data-v-8c9498c0><h2 id=\"footnote-label\" class=\"sr-only\" data-v-8c9498c0><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#footnote-label\" data-v-8c9498c0><span class=\"icon icon-link\" data-v-8c9498c0></span></a>Footnotes</h2><ol data-v-8c9498c0><li id=\"user-content-fn-e1\" data-v-8c9498c0><p data-v-8c9498c0>For example, there is no file header (but font headers exist), and there is no run-length encoding used. <a href=\"#user-content-fnref-e1\" data-footnote-backref=\"\" aria-label=\"Back to reference 1\" class=\"data-footnote-backref\" data-v-8c9498c0>↩</a></p></li></ol></section>", 9)
function render(_ctx, _cache) {
  const _component_notes_bubble_author = _vue.resolveComponent.call(void 0, "notes-bubble-author")

  return (_vue.openBlock.call(void 0, ), _vue.createElementBlock.call(void 0, _vue.Fragment, null, [
    _hoisted_1,
    _vue.createElementVNode.call(void 0, "div", _hoisted_22, [
      _vue.createElementVNode.call(void 0, "div", _hoisted_23, [
        _vue.createVNode.call(void 0, _component_notes_bubble_author, { author: "Claude 3.5 Sonnet" })
      ]),
      _hoisted_24
    ]),
    _hoisted_25,
    _hoisted_26,
    _vue.createElementVNode.call(void 0, "div", _hoisted_27, [
      _vue.createElementVNode.call(void 0, "div", _hoisted_28, [
        _vue.createVNode.call(void 0, _component_notes_bubble_author, { author: "Claude 3.5 Sonnet" })
      ]),
      _hoisted_29
    ]),
    _hoisted_30,
    _vue.createElementVNode.call(void 0, "div", _hoisted_39, [
      _vue.createElementVNode.call(void 0, "div", _hoisted_40, [
        _vue.createVNode.call(void 0, _component_notes_bubble_author, { author: "Cluade 3.5 Sonnet" })
      ]),
      _hoisted_41
    ]),
    _hoisted_42
  ], 64 /* STABLE_FRAGMENT */))
}
__sfc__.render = render
__sfc__.__scopeId = "data-v-8c9498c0"
__sfc__.__file = "Note.vue"
exports. default = __sfc__};
window.precompiledFrontMatter = {"public":true,"title":"All the fonts from CU Writer"};
</script>
  </body>
</html>

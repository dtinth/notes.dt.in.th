const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BA7OEkeG.js","assets/vue-3B7Upzk0.js","assets/supabase-CjkNZD6A.js","assets/index-DKXbdxiG.js"])))=>i.map(i=>d[i]);
import{g as re,_ as O}from"../assets/supabase-CjkNZD6A.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();var ne=function e(t,o){if(t===o)return!0;if(t&&o&&typeof t=="object"&&typeof o=="object"){if(t.constructor!==o.constructor)return!1;var r,n,i;if(Array.isArray(t)){if(r=t.length,r!=o.length)return!1;for(n=r;n--!==0;)if(!e(t[n],o[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===o.source&&t.flags===o.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===o.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===o.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(o).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(o,i[n]))return!1;for(n=r;n--!==0;){var c=i[n];if(!e(t[c],o[c]))return!1}return!0}return t!==t&&o!==o};const se=ne,ie=(e,t=se,{cachePromiseRejection:o=!1}={})=>{if(!e)throw new TypeError("You have to provide a `fn` function.");let r=!1,n,i;return async(...c)=>(r&&t(c,n)||(i=e(...c),!o&&i.catch&&i.catch(()=>r=!1),r=!0,n=c),i)};var ae=ie;const k=re(ae);function z(e){return new Promise(function(t,o,r){(r=new XMLHttpRequest).open("GET",e,r.withCredentials=!0),r.onload=function(){r.status===200?t():o()},r.send()})}var I,ce=(I=document.createElement("link")).relList&&I.relList.supports&&I.relList.supports("prefetch")?function(e){return new Promise(function(t,o,r){(r=document.createElement("link")).rel="prefetch",r.href=e,r.onload=t,r.onerror=o,document.head.appendChild(r)})}:z,ue=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},v=new Set,R=new Set,j=!1;function B(e){if(e){if(e.saveData)return new Error("Save-Data is enabled");if(/2g/.test(e.effectiveType))return new Error("network conditions are poor")}return!0}function le(e){if(e||(e={}),window.IntersectionObserver){var t=function(d){d=d||1;var u=[],y=0;function p(){y<d&&u.length>0&&(u.shift()(),y++)}return[function(g){u.push(g)>1||p()},function(){y--,p()}]}(e.throttle||1/0),o=t[0],r=t[1],n=e.limit||1/0,i=e.origins||[location.hostname],c=e.ignores||[],a=e.delay||0,l=[],f=e.timeoutFn||ue,s=typeof e.hrefFn=="function"&&e.hrefFn,h=e.prerender||!1;j=e.prerenderAndPrefetch||!1;var m=new IntersectionObserver(function(d){d.forEach(function(u){if(u.isIntersecting)l.push((u=u.target).href),function(p,g){g?setTimeout(p,g):p()}(function(){l.indexOf(u.href)!==-1&&(m.unobserve(u),(j||h)&&R.size<1?fe(s?s(u):u.href).catch(function(p){if(!e.onError)throw p;e.onError(p)}):v.size<n&&!h&&o(function(){V(s?s(u):u.href,e.priority).then(r).catch(function(p){r(),e.onError&&e.onError(p)})}))},a);else{var y=l.indexOf((u=u.target).href);y>-1&&l.splice(y)}})},{threshold:e.threshold||0});return f(function(){(e.el||document).querySelectorAll("a").forEach(function(d){i.length&&!i.includes(d.hostname)||function u(y,p){return Array.isArray(p)?p.some(function(g){return u(y,g)}):(p.test||p).call(p,y.href,y)}(d,c)||m.observe(d)})},{timeout:e.timeout||2e3}),function(){v.clear(),m.disconnect()}}}function V(e,t,o){var r=B(navigator.connection);return r instanceof Error?Promise.reject(new Error("Cannot prefetch, "+r.message)):(R.size>0&&!j&&console.warn("[Warning] You are using both prefetching and prerendering on the same document"),Promise.all([].concat(e).map(function(n){if(!v.has(n))return v.add(n),(t?function(i){return window.fetch?fetch(i,{credentials:"include"}):z(i)}:ce)(new URL(n,location.href).toString())})))}function fe(e,t){var o=B(navigator.connection);if(o instanceof Error)return Promise.reject(new Error("Cannot prerender, "+o.message));if(!HTMLScriptElement.supports("speculationrules"))return V(e),Promise.reject(new Error("This browser does not support the speculation rules API. Falling back to prefetch."));if(document.querySelector('script[type="speculationrules"]'))return Promise.reject(new Error("Speculation Rules is already defined and cannot be altered."));for(var r=0,n=[].concat(e);r<n.length;r+=1){var i=n[r];if(window.location.origin!==new URL(i,window.location.href).origin)return Promise.reject(new Error("Only same origin URLs are allowed: "+i));R.add(i)}v.size>0&&!j&&console.warn("[Warning] You are using both prefetching and prerendering on the same document");var c=function(a){var l=document.createElement("script");l.type="speculationrules",l.text='{"prerender":[{"source": "list","urls": ["'+Array.from(a).join('","')+'"]}]}';try{document.head.appendChild(l)}catch(f){return f}return!0}(R);return c===!0?Promise.resolve():Promise.reject(c)}class de extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot.innerHTML=`
      <style>
        @media (min-width: 840px) {
          :host {
            display: flex;
            gap: 2rem;
          }
          .left {
            flex: auto;
          }
          .right {
            flex: none;
            width: 400px;
            min-width: 45%;
          }
        }
      </style>
      <div class="left">
        <slot></slot>
      </div>
      <div class="right">
        <slot name="right"></slot>
      </div>
    `}}customElements.define("d-split",de);class pe extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.style.setProperty("--aspect-ratio",this.getAttribute("aspect-ratio")||"16/9"),this.shadowRoot.innerHTML=`
      <style>
        .embed-container {
          position: relative;
          background: #252423;
          overflow: hidden;
          border: 1px solid #656463;
          box-shadow: 2px 2px 0 #00000040;
        }
      </style>
      <div class="embed-container">
        <div style="aspect-ratio: var(--aspect-ratio);">
          <slot></slot>
        </div>
      </div>
    `}}customElements.define("embed-container",pe);class he extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}render(){const t=JSON.parse(this.getAttribute("front-matter")||"{}");let o="";const r=[];t.facebook&&r.push({url:t.facebook,title:"Facebook",icon:"bi:facebook"}),t.devto&&r.push({url:t.devto,title:"DEV Community",icon:"fa-brands:dev"}),t.twitter&&r.push({url:t.twitter,title:"Twitter",icon:"pajamas:twitter"}),t.reddit&&r.push({url:t.reddit,title:"Reddit",icon:"fa-brands:reddit"}),r.length&&(o+=`<div class="flex gap-2 items-center mt-8">
        <span>Respond on</span>
        ${r.map(n=>`<a href="${n.url}" title="${n.title}" class="text-2xl flex hover:text-#ffffbb">
              <iconify-icon icon="${n.icon}"></iconify-icon>
            </a>`).join("")}
      </div>`),this.innerHTML=`<div class="text-#8b8685">${o}</div>`}}customElements.define("note-footer",he);class me extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}render(){this.innerHTML='<p><a href="/" title="Back to notes.dt.in.th">—</a><a class="p-author h-card" href="https://dt.in.th" title="Back to main website"><img src="/icon.png" alt="" style="display:none">@dtinth</a></p>'}}customElements.define("notes-page-footer",me);class ye extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}render(){this.innerHTML=`<embed-container>
      <iframe
        class="absolute top-0 left-0 w-full h-full"
        src="https://www.youtube.com/embed/${this.getAttribute("video-id")}"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen
      ></iframe>
    </embed-container>`}}customElements.define("youtube-embed",ye);const b=document.createElement("div");b.id="flashMessage";let E=null;function T(e,t={}){if(E&&(clearTimeout(E),E=null),!e){b.className="hidden";return}b.className="fixed top-1 left-1/2 transform -translate-x-1/2 px-2 py-1 text-black "+{info:"bg-yellow-300",success:"bg-green-300",error:"bg-red-300"}[t.type||"info"],b.textContent=e,document.body.appendChild(b),E=setTimeout(()=>{document.body.removeChild(b),E=null},3e3)}const ge=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,be=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,we=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Ee(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){Te(e);return}return t}function Te(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Se(e,t={}){if(typeof e!="string")return e;const o=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return o.slice(1,-1);if(o.length<=9){const r=o.toLowerCase();if(r==="true")return!0;if(r==="false")return!1;if(r==="undefined")return;if(r==="null")return null;if(r==="nan")return Number.NaN;if(r==="infinity")return Number.POSITIVE_INFINITY;if(r==="-infinity")return Number.NEGATIVE_INFINITY}if(!we.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(ge.test(e)||be.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,Ee)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}const ve=/#/g,Oe=/&/g,_e=/\//g,Re=/=/g,M=/\+/g,je=/%5e/gi,Ce=/%60/gi,Ie=/%7c/gi,Pe=/%20/gi;function Ae(e){return encodeURI(""+e).replace(Ie,"|")}function A(e){return Ae(typeof e=="string"?e:JSON.stringify(e)).replace(M,"%2B").replace(Pe,"+").replace(ve,"%23").replace(Oe,"%26").replace(Ce,"`").replace(je,"^").replace(_e,"%2F")}function P(e){return A(e).replace(Re,"%3D")}function Q(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function Le(e){return Q(e.replace(M," "))}function Ne(e){return Q(e.replace(M," "))}function ke(e=""){const t={};e[0]==="?"&&(e=e.slice(1));for(const o of e.split("&")){const r=o.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const n=Le(r[1]);if(n==="__proto__"||n==="constructor")continue;const i=Ne(r[2]||"");t[n]===void 0?t[n]=i:Array.isArray(t[n])?t[n].push(i):t[n]=[t[n],i]}return t}function Me(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(o=>`${P(e)}=${A(o)}`).join("&"):`${P(e)}=${A(t)}`:P(e)}function qe(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>Me(t,e[t])).filter(Boolean).join("&")}const $e=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Fe=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,xe=/^([/\\]\s*){2,}[^/\\]/,He=/^\.?\//;function G(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?$e.test(e):Fe.test(e)||(t.acceptRelative?xe.test(e):!1)}function De(e="",t){return e.endsWith("/")}function Je(e="",t){return(De(e)?e.slice(0,-1):e)||"/"}function Ue(e="",t){return e.endsWith("/")?e:e+"/"}function ze(e,t){if(Ve(t)||G(e))return e;const o=Je(t);return e.startsWith(o)?e:Ge(o,e)}function Be(e,t){const o=Ye(e),r={...ke(o.search),...t};return o.search=qe(r),We(o)}function Ve(e){return!e||e==="/"}function Qe(e){return e&&e!=="/"}function Ge(e,...t){let o=e||"";for(const r of t.filter(n=>Qe(n)))if(o){const n=r.replace(He,"");o=Ue(o)+n}else o=r;return o}const Y=Symbol.for("ufo:protocolRelative");function Ye(e="",t){const o=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(o){const[,h,m=""]=o;return{protocol:h.toLowerCase(),pathname:m,href:h+m,auth:"",host:"",search:"",hash:""}}if(!G(e,{acceptRelative:!0}))return F(e);const[,r="",n,i=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,c="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:l,search:f,hash:s}=F(a);return{protocol:r.toLowerCase(),auth:n?n.slice(0,Math.max(0,n.length-1)):"",host:c,pathname:l,search:f,hash:s,[Y]:!r}}function F(e=""){const[t="",o="",r=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:o,hash:r}}function We(e){const t=e.pathname||"",o=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",r=e.hash||"",n=e.auth?e.auth+"@":"",i=e.host||"";return(e.protocol||e[Y]?(e.protocol||"")+"//":"")+n+i+t+o+r}class Xe extends Error{constructor(t,o){super(t,o),this.name="FetchError",o!=null&&o.cause&&!this.cause&&(this.cause=o.cause)}}function Ze(e){var l,f,s,h,m;const t=((l=e.error)==null?void 0:l.message)||((f=e.error)==null?void 0:f.toString())||"",o=((s=e.request)==null?void 0:s.method)||((h=e.options)==null?void 0:h.method)||"GET",r=((m=e.request)==null?void 0:m.url)||String(e.request)||"/",n=`[${o}] ${JSON.stringify(r)}`,i=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",c=`${n}: ${i}${t?` ${t}`:""}`,a=new Xe(c,e.error?{cause:e.error}:void 0);for(const d of["request","options","response"])Object.defineProperty(a,d,{get(){return e[d]}});for(const[d,u]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,d,{get(){return e.response&&e.response[u]}});return a}const Ke=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function x(e="GET"){return Ke.has(e.toUpperCase())}function et(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const tt=new Set(["image/svg","application/xml","application/xhtml","application/html"]),ot=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function rt(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return ot.test(t)?"json":tt.has(t)||t.startsWith("text/")?"text":"blob"}function nt(e,t,o=globalThis.Headers){const r={...t,...e};if(t!=null&&t.params&&(e!=null&&e.params)&&(r.params={...t==null?void 0:t.params,...e==null?void 0:e.params}),t!=null&&t.query&&(e!=null&&e.query)&&(r.query={...t==null?void 0:t.query,...e==null?void 0:e.query}),t!=null&&t.headers&&(e!=null&&e.headers)){r.headers=new o((t==null?void 0:t.headers)||{});for(const[n,i]of new o((e==null?void 0:e.headers)||{}))r.headers.set(n,i)}return r}const st=new Set([408,409,425,429,500,502,503,504]),it=new Set([101,204,205,304]);function W(e={}){const{fetch:t=globalThis.fetch,Headers:o=globalThis.Headers,AbortController:r=globalThis.AbortController}=e;async function n(a){const l=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!l){let s;typeof a.options.retry=="number"?s=a.options.retry:s=x(a.options.method)?0:1;const h=a.response&&a.response.status||500;if(s>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(h):st.has(h))){const m=a.options.retryDelay||0;return m>0&&await new Promise(d=>setTimeout(d,m)),i(a.request,{...a.options,retry:s-1})}}const f=Ze(a);throw Error.captureStackTrace&&Error.captureStackTrace(f,i),f}const i=async function(l,f={}){var d;const s={request:l,options:nt(f,e.defaults,o),response:void 0,error:void 0};s.options.method=(d=s.options.method)==null?void 0:d.toUpperCase(),s.options.onRequest&&await s.options.onRequest(s),typeof s.request=="string"&&(s.options.baseURL&&(s.request=ze(s.request,s.options.baseURL)),(s.options.query||s.options.params)&&(s.request=Be(s.request,{...s.options.params,...s.options.query}))),s.options.body&&x(s.options.method)&&(et(s.options.body)?(s.options.body=typeof s.options.body=="string"?s.options.body:JSON.stringify(s.options.body),s.options.headers=new o(s.options.headers||{}),s.options.headers.has("content-type")||s.options.headers.set("content-type","application/json"),s.options.headers.has("accept")||s.options.headers.set("accept","application/json")):("pipeTo"in s.options.body&&typeof s.options.body.pipeTo=="function"||typeof s.options.body.pipe=="function")&&("duplex"in s.options||(s.options.duplex="half")));let h;if(!s.options.signal&&s.options.timeout){const u=new r;h=setTimeout(()=>u.abort(),s.options.timeout),s.options.signal=u.signal}try{s.response=await t(s.request,s.options)}catch(u){return s.error=u,s.options.onRequestError&&await s.options.onRequestError(s),await n(s)}finally{h&&clearTimeout(h)}if(s.response.body&&!it.has(s.response.status)&&s.options.method!=="HEAD"){const u=(s.options.parseResponse?"json":s.options.responseType)||rt(s.response.headers.get("content-type")||"");switch(u){case"json":{const y=await s.response.text(),p=s.options.parseResponse||Se;s.response._data=p(y);break}case"stream":{s.response._data=s.response.body;break}default:s.response._data=await s.response[u]()}}return s.options.onResponse&&await s.options.onResponse(s),!s.options.ignoreResponseError&&s.response.status>=400&&s.response.status<600?(s.options.onResponseError&&await s.options.onResponseError(s),await n(s)):s.response},c=async function(l,f){return(await i(l,f))._data};return c.raw=i,c.native=(...a)=>t(...a),c.create=(a={})=>W({...e,defaults:{...e.defaults,...a}}),c}const q=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),at=q.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),ct=q.Headers,ut=q.AbortController,C=W({fetch:at,Headers:ct,AbortController:ut});async function lt(e){return(await C("https://htrqhjrmmqrqaccchyne.supabase.co/rest/v1/rpc/notes_get_contents?apikey=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh0cnFoanJtbXFycWFjY2NoeW5lIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NTkxOTk3NDIsImV4cCI6MTk3NDc3NTc0Mn0.VEdURpInV9dowpoMkHopAzpiBtNnRXDgO6hRfy1ZSHY",{method:"POST",body:{input_search_key:e.toLowerCase()}}))[0]}async function ft(){return await C("https://htrqhjrmmqrqaccchyne.supabase.co/storage/v1/object/public/notes-public/notes.tree.json")}function dt(e){return function(t){return e==null?void 0:e[t]}}var pt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ht=dt(pt),mt=typeof global=="object"&&global&&global.Object===Object&&global,yt=typeof self=="object"&&self&&self.Object===Object&&self,gt=mt||yt||Function("return this")(),w=gt.Symbol;function bt(e,t){for(var o=-1,r=e==null?0:e.length,n=Array(r);++o<r;)n[o]=t(e[o],o,e);return n}var wt=Array.isArray,X=Object.prototype,Et=X.hasOwnProperty,Tt=X.toString,S=w?w.toStringTag:void 0;function St(e){var t=Et.call(e,S),o=e[S];try{e[S]=void 0;var r=!0}catch{}var n=Tt.call(e);return r&&(t?e[S]=o:delete e[S]),n}var vt=Object.prototype,Ot=vt.toString;function _t(e){return Ot.call(e)}var Rt="[object Null]",jt="[object Undefined]",H=w?w.toStringTag:void 0;function Ct(e){return e==null?e===void 0?jt:Rt:H&&H in Object(e)?St(e):_t(e)}function It(e){return e!=null&&typeof e=="object"}var Pt="[object Symbol]";function At(e){return typeof e=="symbol"||It(e)&&Ct(e)==Pt}var Lt=1/0,D=w?w.prototype:void 0,J=D?D.toString:void 0;function Z(e){if(typeof e=="string")return e;if(wt(e))return bt(e,Z)+"";if(At(e))return J?J.call(e):"";var t=e+"";return t=="0"&&1/e==-Lt?"-0":t}function Nt(e){return e==null?"":Z(e)}var K=/[&<>"']/g,kt=RegExp(K.source);function U(e){return e=Nt(e),e&&kt.test(e)?e.replace(K,ht):e}function Mt(e){return`<div class="prose e-content" id="noteContents">${e}</div>`}function qt(e){return e==="notes.dt.in.th"?e:`${e} | notes.dt.in.th`}function $t(e){const t=[];for(const o of e)t.push('<div class="px-2 flex-none">›</div>'),t.push(`<div class="truncate"><a title="${U(o.title)}" href="${o.url}">${U(o.label)}</a></div>`);return t.join("")}function Ft(e,t){var n;const o=e.nodes,r=[];for(let i=(n=o[t])==null?void 0:n.parent;i&&i!=="HomePage"&&o[i];i=o[i].parent){const c=o[i];r.unshift({label:c.title.replace(/ \(topic\)$/,""),title:c.title,url:i})}return r}function L(e){if(e.error)throw e.error;return e.data}const $=k(async()=>{const t=(await O(()=>import("../assets/supabase-CjkNZD6A.js").then(o=>o.i),[])).createClient("https://htrqhjrmmqrqaccchyne.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh0cnFoanJtbXFycWFjY2NoeW5lIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NTkxOTk3NDIsImV4cCI6MTk3NDc3NTc0Mn0.VEdURpInV9dowpoMkHopAzpiBtNnRXDgO6hRfy1ZSHY");return Object.assign(window,{supabase:t}),t});async function xt(){const e=document.createElement("div");e.className="absolute top-[64px] left-2",e.innerHTML=`<div id="g_id_onload"
     data-client_id="347735770628-4n43ifcg3mmce5ema444thhosdtoougl.apps.googleusercontent.com"
     data-context="signin"
     data-ux_mode="popup"
     data-callback="onGoogleAuth"
     data-auto_prompt="false">
</div>
<div class="g_id_signin"
     data-type="standard"
     data-shape="rectangular"
     data-theme="filled_blue"
     data-text="signin_with"
     data-size="large"
     data-logo_alignment="left">
</div>`,document.body.appendChild(e);const t=document.createElement("script");return t.src="https://accounts.google.com/gsi/client",t.async=!0,document.body.appendChild(t),new Promise(o=>{Object.assign(window,{onGoogleAuth:r=>{o(r)}})})}const ee=k(async()=>{const e=await $(),{user:t}=L(await e.auth.getUser());if(!t)throw new Error("User is not signed in");const o=L(await e.from("notes_settings").select("id, value"))||[];return Object.fromEntries(o.map(r=>[r.id,r.value]))});let _;async function Ht(){var n;if(_&&_.expires>Date.now())return _.accessToken;const e=await $(),t=await ee(),o=(n=L(await e.auth.getSession()).session)==null?void 0:n.access_token;if(!o)throw new Error("Access token is not available");const r=await C(`${t.privateUrl}/auth/supabase`,{method:"POST",body:{supabaseAccessToken:o}});return _={accessToken:r.accessToken,expires:Date.now()+1e3*60*15},r.accessToken}async function Dt(e){const t=await $(),{data:{user:o}={},error:r}=await t.auth.getUser();if(!o)return r&&console.error(r),xt().then(async a=>{const{data:l,error:f}=await t.auth.signInWithIdToken({provider:"google",token:a.credential});f&&console.error(f),console.log("Signed in",l)}),{id:e,source:"# Private note"};const n=await Ht(),i=await ee(),c=await C(`${i.privateUrl}/web/notes/${e}`,{headers:{Authorization:`Bearer ${n}`}});return{id:e,source:c.source}}function Jt(){return Ut(),Vt(),zt(),Bt(),Wt()}async function Ut(){const e=document.getElementById("headerToolbar"),t={width:24,height:24,body:'<path fill="currentColor" d="M15.25 0a8.25 8.25 0 0 0-6.18 13.72L1 22.88l1.12 1l8.05-9.12A8.251 8.251 0 1 0 15.25.01V0zm0 15a6.75 6.75 0 1 1 0-13.5a6.75 6.75 0 0 1 0 13.5z"/>'},o=document.createElement("button");o.className="flex items-center text-#8b8685",o.title="Search",o.id="search-button";const r=O(()=>import("../assets/index-BA7OEkeG.js"),__vite__mapDeps([0,1,2]));o.onclick=async()=>{const{openSearch:l}=await r;l()};const n=document.createElement("iconify-icon");n.setAttribute("icon",JSON.stringify(t)),n.setAttribute("height","24"),o.appendChild(n),e.appendChild(o);const i={body:'<path fill-rule="evenodd" clip-rule="evenodd" d="M53 128.8l-16-8.2a192 192 0 1094.7-88.9l7.1 16.6A174 174 0 1153 128.8z" fill="#8b8685"></path> <path d="M94.7 92.3L82 126.5 62.6 95.7l-36.4-1.4 23.3-28-9.9-35.1 33.9 13.5 30.3-20.3-2.4 36.4L130 83.3l-35.3 9z" fill="#d7fc70"></path>',width:416,height:416},c=document.createElement("a");c.className="flex items-center",c.href="https://webring.wonderful.software/#dt.in.th",c.title="วงแหวนเว็บ (webring)";const a=document.createElement("iconify-icon");a.setAttribute("icon",JSON.stringify(i)),a.setAttribute("height","32"),c.appendChild(a),e.appendChild(c)}async function zt(){le()}async function Bt(){const e=t=>{var o;t.key==="k"&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),(o=document.querySelector("#search-button"))==null||o.click())};document.addEventListener("keydown",e)}async function Vt(){(location.hash==="#og:image"||location.hash==="#og_image")&&document.documentElement.setAttribute("data-screenshot-mode","true")}async function Qt(){Object.assign(window,{global:window,process:{env:{}}});const{Buffer:e}=await O(async()=>{const{Buffer:t}=await import("../assets/index-2iPFC8n8.js");return{Buffer:t}},[]);return Object.assign(window,{Buffer:e}),import(location.origin+"/lib/compiler/index.js")}let te=()=>{};const Gt=k(async()=>{const e=document.querySelector("header a");e&&(e.href="HomePage",e.innerHTML+=' <span class="ml-1 bg-red-400 text-black inline-block align-middle px-1 text-sm rounded font-bold uppercase">Private</span>'),window.addEventListener("keydown",async t=>{t.key==="r"&&te()})});async function N(e,t){T("Loading notes contents...");const o=async()=>t.isPrivate?(Gt(),te=()=>{N(e,t)},Dt(e)):lt(e),{source:r,id:n}=await o();location.pathname!==`/${n}`&&(location.pathname===`/${e}`||location.pathname==="/")&&history.replaceState({},"",`/${n}`),Yt(n),T("Loading compiler...");const{compileMarkdown:i}=await Qt();Object.assign(window,{compileMarkdown:i}),T("Compiling...");const c=await i(r,n);T("Running..."),await Xt(c.compiled),T("")}async function Yt(e){const t=await ft(),o=Ft(t,e),r=$t(o),n=document.querySelector("breadcrumb-placeholder");n&&(n.outerHTML=r)}async function Wt(){const e=window;if(e.precompiledNoteBehavior)await Zt(e.precompiledNoteBehavior,e.precompiledFrontMatter||{});else{const o=location.pathname.match(/^\/(private\/)?([A-Za-z0-9]+)$/);o?await N(o[2],{isPrivate:!!o[1]}):await N("HomePage",{isPrivate:!1})}}async function Xt(e){document.querySelector("#mainContents").innerHTML=Mt(e.html);const t=document.querySelector("#note-styles");t&&t.remove();const o=document.createElement("style");o.id="note-styles",o.innerHTML=e.css,document.head.appendChild(o);const r=document.querySelectorAll("head [data-source='note']");for(const i of r)i.remove();for(const[i,c]of e.head){const a=document.createElement(i);for(const[l,f]of Object.entries(c))a.setAttribute(l,f);a.dataset.source="note",document.head.appendChild(a)}document.title=qt(e.title);for(const[i,c]of Object.entries(e.dataset))document.documentElement.dataset[i]=c;console.log('This note has been dynamically compiled. To inspect the compiled code, open the console and type "compiled".'),Object.assign(window,{compiled:e}),oe(e.frontMatter);const{hydrate:n}=await O(async()=>{const{hydrate:i}=await import("../assets/index-DKXbdxiG.js");return{hydrate:i}},__vite__mapDeps([3,2,1]));n(e.js,"#noteContents")}async function Zt(e,t){oe(t);const{hydrate:o}=await O(async()=>{const{hydrate:r}=await import("../assets/index-DKXbdxiG.js");return{hydrate:r}},__vite__mapDeps([3,2,1]));o(e,"#noteContents")}async function oe(e){console.log("Front matter:",e);const t=document.querySelector("#mainContents"),o=document.createElement("note-footer");o.setAttribute("front-matter",JSON.stringify(e)),t==null||t.appendChild(o)}Jt();export{C as o};

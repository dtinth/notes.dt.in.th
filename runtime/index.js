const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BA7OEkeG.js","assets/vue-3B7Upzk0.js","assets/supabase-CjkNZD6A.js","assets/index-DKXbdxiG.js"])))=>i.map(i=>d[i]);
import{g as se,_ as O}from"../assets/supabase-CjkNZD6A.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();var ie=function e(t,o){if(t===o)return!0;if(t&&o&&typeof t=="object"&&typeof o=="object"){if(t.constructor!==o.constructor)return!1;var r,n,i;if(Array.isArray(t)){if(r=t.length,r!=o.length)return!1;for(n=r;n--!==0;)if(!e(t[n],o[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===o.source&&t.flags===o.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===o.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===o.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(o).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(o,i[n]))return!1;for(n=r;n--!==0;){var c=i[n];if(!e(t[c],o[c]))return!1}return!0}return t!==t&&o!==o};const ae=ie,ce=(e,t=ae,{cachePromiseRejection:o=!1}={})=>{if(!e)throw new TypeError("You have to provide a `fn` function.");let r=!1,n,i;return async(...c)=>(r&&t(c,n)||(i=e(...c),!o&&i.catch&&i.catch(()=>r=!1),r=!0,n=c),i)};var ue=ce;const q=se(ue);function V(e){return new Promise(function(t,o,r){(r=new XMLHttpRequest).open("GET",e,r.withCredentials=!0),r.onload=function(){r.status===200?t():o()},r.send()})}var I,le=(I=document.createElement("link")).relList&&I.relList.supports&&I.relList.supports("prefetch")?function(e){return new Promise(function(t,o,r){(r=document.createElement("link")).rel="prefetch",r.href=e,r.onload=t,r.onerror=o,document.head.appendChild(r)})}:V,fe=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},S=new Set,R=new Set,j=!1;function G(e){if(e){if(e.saveData)return new Error("Save-Data is enabled");if(/2g/.test(e.effectiveType))return new Error("network conditions are poor")}return!0}function de(e){if(e||(e={}),window.IntersectionObserver){var t=function(d){d=d||1;var l=[],y=0;function p(){y<d&&l.length>0&&(l.shift()(),y++)}return[function(g){l.push(g)>1||p()},function(){y--,p()}]}(e.throttle||1/0),o=t[0],r=t[1],n=e.limit||1/0,i=e.origins||[location.hostname],c=e.ignores||[],a=e.delay||0,u=[],f=e.timeoutFn||fe,s=typeof e.hrefFn=="function"&&e.hrefFn,h=e.prerender||!1;j=e.prerenderAndPrefetch||!1;var m=new IntersectionObserver(function(d){d.forEach(function(l){if(l.isIntersecting)u.push((l=l.target).href),function(p,g){g?setTimeout(p,g):p()}(function(){u.indexOf(l.href)!==-1&&(m.unobserve(l),(j||h)&&R.size<1?pe(s?s(l):l.href).catch(function(p){if(!e.onError)throw p;e.onError(p)}):S.size<n&&!h&&o(function(){W(s?s(l):l.href,e.priority).then(r).catch(function(p){r(),e.onError&&e.onError(p)})}))},a);else{var y=u.indexOf((l=l.target).href);y>-1&&u.splice(y)}})},{threshold:e.threshold||0});return f(function(){(e.el||document).querySelectorAll("a").forEach(function(d){i.length&&!i.includes(d.hostname)||function l(y,p){return Array.isArray(p)?p.some(function(g){return l(y,g)}):(p.test||p).call(p,y.href,y)}(d,c)||m.observe(d)})},{timeout:e.timeout||2e3}),function(){S.clear(),m.disconnect()}}}function W(e,t,o){var r=G(navigator.connection);return r instanceof Error?Promise.reject(new Error("Cannot prefetch, "+r.message)):(R.size>0&&!j&&console.warn("[Warning] You are using both prefetching and prerendering on the same document"),Promise.all([].concat(e).map(function(n){if(!S.has(n))return S.add(n),(t?function(i){return window.fetch?fetch(i,{credentials:"include"}):V(i)}:le)(new URL(n,location.href).toString())})))}function pe(e,t){var o=G(navigator.connection);if(o instanceof Error)return Promise.reject(new Error("Cannot prerender, "+o.message));if(!HTMLScriptElement.supports("speculationrules"))return W(e),Promise.reject(new Error("This browser does not support the speculation rules API. Falling back to prefetch."));if(document.querySelector('script[type="speculationrules"]'))return Promise.reject(new Error("Speculation Rules is already defined and cannot be altered."));for(var r=0,n=[].concat(e);r<n.length;r+=1){var i=n[r];if(window.location.origin!==new URL(i,window.location.href).origin)return Promise.reject(new Error("Only same origin URLs are allowed: "+i));R.add(i)}S.size>0&&!j&&console.warn("[Warning] You are using both prefetching and prerendering on the same document");var c=function(a){var u=document.createElement("script");u.type="speculationrules",u.text='{"prerender":[{"source": "list","urls": ["'+Array.from(a).join('","')+'"]}]}';try{document.head.appendChild(u)}catch(f){return f}return!0}(R);return c===!0?Promise.resolve():Promise.reject(c)}class he extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot.innerHTML=`
      <style>
        @media (min-width: 840px) {
          :host {
            display: flex;
            gap: 2rem;
          }
          .left {
            flex: auto;
          }
          .right {
            flex: none;
            width: 400px;
            min-width: 45%;
          }
        }
      </style>
      <div class="left">
        <slot></slot>
      </div>
      <div class="right">
        <slot name="right"></slot>
      </div>
    `}}customElements.define("d-split",he);class me extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.style.setProperty("--aspect-ratio",this.getAttribute("aspect-ratio")||"16/9"),this.shadowRoot.innerHTML=`
      <style>
        .embed-container {
          position: relative;
          background: #252423;
          overflow: hidden;
          border: 1px solid #656463;
          box-shadow: 2px 2px 0 #00000040;
        }
      </style>
      <div class="embed-container">
        <div style="aspect-ratio: var(--aspect-ratio);">
          <slot></slot>
        </div>
      </div>
    `}}customElements.define("embed-container",me);class ye extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}render(){const t=JSON.parse(this.getAttribute("front-matter")||"{}");let o="";const r=[];t.facebook&&r.push({url:t.facebook,title:"Facebook",icon:"bi:facebook"}),t.devto&&r.push({url:t.devto,title:"DEV Community",icon:"fa-brands:dev"}),t.twitter&&r.push({url:t.twitter,title:"Twitter",icon:"pajamas:twitter"}),t.reddit&&r.push({url:t.reddit,title:"Reddit",icon:"fa-brands:reddit"}),r.length&&(o+=`<div class="flex gap-2 items-center mt-8">
        <span>Respond on</span>
        ${r.map(n=>`<a href="${n.url}" title="${n.title}" class="text-2xl flex hover:text-#ffffbb">
              <iconify-icon icon="${n.icon}"></iconify-icon>
            </a>`).join("")}
      </div>`),this.innerHTML=`<div class="text-#8b8685">${o}</div>`}}customElements.define("note-footer",ye);const P={chatgpt:"https://im.dt.in.th/ipfs/bafybeihu4q3gbfszrvpy5s7pl5h5vxx7r2fs7vnq74b6ch3pl3brtnl5yq/image.webp",claude:"https://im.dt.in.th/ipfs/bafybeih6ou6xr3sblruheh4343waamftbo4l7rmzvh64jax36wike5tacu/image.webp",gemini:"https://im.dt.in.th/ipfs/bafybeidzmyxzdilpefpn77hd2smv5kyse3vdbl7soet75vkzodsdr763ua/image.webp"};class be extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}render(){const t=this.getAttribute("author")||"";t.startsWith("Claude")?this.showImage(P.claude):t.startsWith("ChatGPT")||t.startsWith("GPT-")?this.showImage(P.chatgpt):t.startsWith("Gemini")&&this.showImage(P.gemini)}showImage(t){this.innerHTML=`<img src="${t}" class="not-prose absolute top-0 left-0 w-full h-full object-cover" alt="">`;const o=this.querySelector("img");o&&(o.alt=this.getAttribute("author")||"")}}customElements.define("notes-bubble-author",be);class ge extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}render(){this.innerHTML='<p><a href="/" title="Back to notes.dt.in.th">—</a><a class="p-author h-card" href="https://dt.in.th" title="Back to main website"><img src="/icon.png" alt="" style="display:none">@dtinth</a></p>'}}customElements.define("notes-page-footer",ge);class we extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}render(){this.innerHTML=`<embed-container>
      <iframe
        class="absolute top-0 left-0 w-full h-full"
        src="https://www.youtube.com/embed/${this.getAttribute("video-id")}"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen
      ></iframe>
    </embed-container>`}}customElements.define("youtube-embed",we);const w=document.createElement("div");w.id="flashMessage";let T=null;function b(e,t={}){if(T&&(clearTimeout(T),T=null),!e){w.className="hidden";return}w.className="fixed top-1 left-1/2 transform -translate-x-1/2 px-2 py-1 text-black "+{info:"bg-yellow-300",success:"bg-green-300",error:"bg-red-300"}[t.type||"info"],w.textContent=e,document.body.appendChild(w),T=setTimeout(()=>{document.body.removeChild(w),T=null},3e3)}const Ee=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Te=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,ve=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Se(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){Oe(e);return}return t}function Oe(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function _e(e,t={}){if(typeof e!="string")return e;const o=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return o.slice(1,-1);if(o.length<=9){const r=o.toLowerCase();if(r==="true")return!0;if(r==="false")return!1;if(r==="undefined")return;if(r==="null")return null;if(r==="nan")return Number.NaN;if(r==="infinity")return Number.POSITIVE_INFINITY;if(r==="-infinity")return Number.NEGATIVE_INFINITY}if(!ve.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(Ee.test(e)||Te.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,Se)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}const Re=/#/g,je=/&/g,Ce=/\//g,Ie=/=/g,M=/\+/g,Pe=/%5e/gi,Ae=/%60/gi,Le=/%7c/gi,Ne=/%20/gi;function ke(e){return encodeURI(""+e).replace(Le,"|")}function L(e){return ke(typeof e=="string"?e:JSON.stringify(e)).replace(M,"%2B").replace(Ne,"+").replace(Re,"%23").replace(je,"%26").replace(Ae,"`").replace(Pe,"^").replace(Ce,"%2F")}function A(e){return L(e).replace(Ie,"%3D")}function Q(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function qe(e){return Q(e.replace(M," "))}function Me(e){return Q(e.replace(M," "))}function xe(e=""){const t={};e[0]==="?"&&(e=e.slice(1));for(const o of e.split("&")){const r=o.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const n=qe(r[1]);if(n==="__proto__"||n==="constructor")continue;const i=Me(r[2]||"");t[n]===void 0?t[n]=i:Array.isArray(t[n])?t[n].push(i):t[n]=[t[n],i]}return t}function $e(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(o=>`${A(e)}=${L(o)}`).join("&"):`${A(e)}=${L(t)}`:A(e)}function He(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>$e(t,e[t])).filter(Boolean).join("&")}const Fe=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,De=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Je=/^([/\\]\s*){2,}[^/\\]/,ze=/^\.?\//;function Y(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?Fe.test(e):De.test(e)||(t.acceptRelative?Je.test(e):!1)}function Ue(e="",t){return e.endsWith("/")}function Be(e="",t){return(Ue(e)?e.slice(0,-1):e)||"/"}function Ve(e="",t){return e.endsWith("/")?e:e+"/"}function Ge(e,t){if(Qe(t)||Y(e))return e;const o=Be(t);return e.startsWith(o)?e:Xe(o,e)}function We(e,t){const o=Ze(e),r={...xe(o.search),...t};return o.search=He(r),Ke(o)}function Qe(e){return!e||e==="/"}function Ye(e){return e&&e!=="/"}function Xe(e,...t){let o=e||"";for(const r of t.filter(n=>Ye(n)))if(o){const n=r.replace(ze,"");o=Ve(o)+n}else o=r;return o}const X=Symbol.for("ufo:protocolRelative");function Ze(e="",t){const o=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(o){const[,h,m=""]=o;return{protocol:h.toLowerCase(),pathname:m,href:h+m,auth:"",host:"",search:"",hash:""}}if(!Y(e,{acceptRelative:!0}))return H(e);const[,r="",n,i=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,c="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:u,search:f,hash:s}=H(a);return{protocol:r.toLowerCase(),auth:n?n.slice(0,Math.max(0,n.length-1)):"",host:c,pathname:u,search:f,hash:s,[X]:!r}}function H(e=""){const[t="",o="",r=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:o,hash:r}}function Ke(e){const t=e.pathname||"",o=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",r=e.hash||"",n=e.auth?e.auth+"@":"",i=e.host||"";return(e.protocol||e[X]?(e.protocol||"")+"//":"")+n+i+t+o+r}class et extends Error{constructor(t,o){super(t,o),this.name="FetchError",o!=null&&o.cause&&!this.cause&&(this.cause=o.cause)}}function tt(e){var u,f,s,h,m;const t=((u=e.error)==null?void 0:u.message)||((f=e.error)==null?void 0:f.toString())||"",o=((s=e.request)==null?void 0:s.method)||((h=e.options)==null?void 0:h.method)||"GET",r=((m=e.request)==null?void 0:m.url)||String(e.request)||"/",n=`[${o}] ${JSON.stringify(r)}`,i=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",c=`${n}: ${i}${t?` ${t}`:""}`,a=new et(c,e.error?{cause:e.error}:void 0);for(const d of["request","options","response"])Object.defineProperty(a,d,{get(){return e[d]}});for(const[d,l]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,d,{get(){return e.response&&e.response[l]}});return a}const ot=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function F(e="GET"){return ot.has(e.toUpperCase())}function rt(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const nt=new Set(["image/svg","application/xml","application/xhtml","application/html"]),st=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function it(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return st.test(t)?"json":nt.has(t)||t.startsWith("text/")?"text":"blob"}function at(e,t,o=globalThis.Headers){const r={...t,...e};if(t!=null&&t.params&&(e!=null&&e.params)&&(r.params={...t==null?void 0:t.params,...e==null?void 0:e.params}),t!=null&&t.query&&(e!=null&&e.query)&&(r.query={...t==null?void 0:t.query,...e==null?void 0:e.query}),t!=null&&t.headers&&(e!=null&&e.headers)){r.headers=new o((t==null?void 0:t.headers)||{});for(const[n,i]of new o((e==null?void 0:e.headers)||{}))r.headers.set(n,i)}return r}const ct=new Set([408,409,425,429,500,502,503,504]),ut=new Set([101,204,205,304]);function Z(e={}){const{fetch:t=globalThis.fetch,Headers:o=globalThis.Headers,AbortController:r=globalThis.AbortController}=e;async function n(a){const u=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!u){let s;typeof a.options.retry=="number"?s=a.options.retry:s=F(a.options.method)?0:1;const h=a.response&&a.response.status||500;if(s>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(h):ct.has(h))){const m=a.options.retryDelay||0;return m>0&&await new Promise(d=>setTimeout(d,m)),i(a.request,{...a.options,retry:s-1})}}const f=tt(a);throw Error.captureStackTrace&&Error.captureStackTrace(f,i),f}const i=async function(u,f={}){var d;const s={request:u,options:at(f,e.defaults,o),response:void 0,error:void 0};s.options.method=(d=s.options.method)==null?void 0:d.toUpperCase(),s.options.onRequest&&await s.options.onRequest(s),typeof s.request=="string"&&(s.options.baseURL&&(s.request=Ge(s.request,s.options.baseURL)),(s.options.query||s.options.params)&&(s.request=We(s.request,{...s.options.params,...s.options.query}))),s.options.body&&F(s.options.method)&&(rt(s.options.body)?(s.options.body=typeof s.options.body=="string"?s.options.body:JSON.stringify(s.options.body),s.options.headers=new o(s.options.headers||{}),s.options.headers.has("content-type")||s.options.headers.set("content-type","application/json"),s.options.headers.has("accept")||s.options.headers.set("accept","application/json")):("pipeTo"in s.options.body&&typeof s.options.body.pipeTo=="function"||typeof s.options.body.pipe=="function")&&("duplex"in s.options||(s.options.duplex="half")));let h;if(!s.options.signal&&s.options.timeout){const l=new r;h=setTimeout(()=>l.abort(),s.options.timeout),s.options.signal=l.signal}try{s.response=await t(s.request,s.options)}catch(l){return s.error=l,s.options.onRequestError&&await s.options.onRequestError(s),await n(s)}finally{h&&clearTimeout(h)}if(s.response.body&&!ut.has(s.response.status)&&s.options.method!=="HEAD"){const l=(s.options.parseResponse?"json":s.options.responseType)||it(s.response.headers.get("content-type")||"");switch(l){case"json":{const y=await s.response.text(),p=s.options.parseResponse||_e;s.response._data=p(y);break}case"stream":{s.response._data=s.response.body;break}default:s.response._data=await s.response[l]()}}return s.options.onResponse&&await s.options.onResponse(s),!s.options.ignoreResponseError&&s.response.status>=400&&s.response.status<600?(s.options.onResponseError&&await s.options.onResponseError(s),await n(s)):s.response},c=async function(u,f){return(await i(u,f))._data};return c.raw=i,c.native=(...a)=>t(...a),c.create=(a={})=>Z({...e,defaults:{...e.defaults,...a}}),c}const x=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),lt=x.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),ft=x.Headers,dt=x.AbortController,C=Z({fetch:lt,Headers:ft,AbortController:dt});async function pt(e){return(await C("https://htrqhjrmmqrqaccchyne.supabase.co/rest/v1/rpc/notes_get_contents?apikey=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh0cnFoanJtbXFycWFjY2NoeW5lIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NTkxOTk3NDIsImV4cCI6MTk3NDc3NTc0Mn0.VEdURpInV9dowpoMkHopAzpiBtNnRXDgO6hRfy1ZSHY",{method:"POST",body:{input_search_key:e.toLowerCase()}}))[0]}async function ht(){return await C("https://htrqhjrmmqrqaccchyne.supabase.co/storage/v1/object/public/notes-public/notes.tree.json")}function mt(e){return function(t){return e==null?void 0:e[t]}}var yt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bt=mt(yt),gt=typeof global=="object"&&global&&global.Object===Object&&global,wt=typeof self=="object"&&self&&self.Object===Object&&self,Et=gt||wt||Function("return this")(),E=Et.Symbol;function Tt(e,t){for(var o=-1,r=e==null?0:e.length,n=Array(r);++o<r;)n[o]=t(e[o],o,e);return n}var vt=Array.isArray,K=Object.prototype,St=K.hasOwnProperty,Ot=K.toString,v=E?E.toStringTag:void 0;function _t(e){var t=St.call(e,v),o=e[v];try{e[v]=void 0;var r=!0}catch{}var n=Ot.call(e);return r&&(t?e[v]=o:delete e[v]),n}var Rt=Object.prototype,jt=Rt.toString;function Ct(e){return jt.call(e)}var It="[object Null]",Pt="[object Undefined]",D=E?E.toStringTag:void 0;function At(e){return e==null?e===void 0?Pt:It:D&&D in Object(e)?_t(e):Ct(e)}function Lt(e){return e!=null&&typeof e=="object"}var Nt="[object Symbol]";function kt(e){return typeof e=="symbol"||Lt(e)&&At(e)==Nt}var qt=1/0,J=E?E.prototype:void 0,z=J?J.toString:void 0;function ee(e){if(typeof e=="string")return e;if(vt(e))return Tt(e,ee)+"";if(kt(e))return z?z.call(e):"";var t=e+"";return t=="0"&&1/e==-qt?"-0":t}function Mt(e){return e==null?"":ee(e)}var te=/[&<>"']/g,xt=RegExp(te.source);function U(e){return e=Mt(e),e&&xt.test(e)?e.replace(te,bt):e}function $t(e){return`<div class="prose e-content" id="noteContents">${e}</div>`}function Ht(e){return e==="notes.dt.in.th"?e:`${e} | notes.dt.in.th`}function Ft(e){const t=[];for(const o of e)t.push('<div class="px-2 flex-none">›</div>'),t.push(`<div class="truncate"><a title="${U(o.title)}" href="${o.url}">${U(o.label)}</a></div>`);return t.join("")}function Dt(e,t){var n;const o=e.nodes,r=[];for(let i=(n=o[t])==null?void 0:n.parent;i&&i!=="HomePage"&&o[i];i=o[i].parent){const c=o[i];r.unshift({label:c.title.replace(/ \(topic\)$/,""),title:c.title,url:i})}return r}function N(e){if(e.error)throw e.error;return e.data}const $=q(async()=>{const t=(await O(()=>import("../assets/supabase-CjkNZD6A.js").then(o=>o.i),[])).createClient("https://htrqhjrmmqrqaccchyne.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh0cnFoanJtbXFycWFjY2NoeW5lIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NTkxOTk3NDIsImV4cCI6MTk3NDc3NTc0Mn0.VEdURpInV9dowpoMkHopAzpiBtNnRXDgO6hRfy1ZSHY");return Object.assign(window,{supabase:t}),t});async function Jt(){const e=document.createElement("div");e.className="absolute top-[64px] left-2",e.innerHTML=`<div id="g_id_onload"
     data-client_id="347735770628-4n43ifcg3mmce5ema444thhosdtoougl.apps.googleusercontent.com"
     data-context="signin"
     data-ux_mode="popup"
     data-callback="onGoogleAuth"
     data-auto_prompt="false">
</div>
<div class="g_id_signin"
     data-type="standard"
     data-shape="rectangular"
     data-theme="filled_blue"
     data-text="signin_with"
     data-size="large"
     data-logo_alignment="left">
</div>`,document.body.appendChild(e);const t=document.createElement("script");return t.src="https://accounts.google.com/gsi/client",t.async=!0,document.body.appendChild(t),new Promise(o=>{Object.assign(window,{onGoogleAuth:r=>{o(r)}})})}const oe=q(async()=>{const e=await $(),{user:t}=N(await e.auth.getUser());if(!t)throw new Error("User is not signed in");const o=N(await e.from("notes_settings").select("id, value"))||[];return Object.fromEntries(o.map(r=>[r.id,r.value]))});let _;async function zt(){var n;if(_&&_.expires>Date.now())return _.accessToken;const e=await $(),t=await oe(),o=(n=N(await e.auth.getSession()).session)==null?void 0:n.access_token;if(!o)throw new Error("Access token is not available");const r=await C(`${t.privateUrl}/auth/supabase`,{method:"POST",body:{supabaseAccessToken:o}});return _={accessToken:r.accessToken,expires:Date.now()+1e3*60*15},r.accessToken}async function Ut(e){const t=await $(),{data:{user:o}={},error:r}=await t.auth.getUser();if(!o)return r&&console.error(r),Jt().then(async a=>{const{data:u,error:f}=await t.auth.signInWithIdToken({provider:"google",token:a.credential});f&&console.error(f),console.log("Signed in",u)}),{id:e,source:"# Private note"};const n=await zt(),i=await oe(),c=await C(`${i.privateUrl}/web/notes/${e}`,{headers:{Authorization:`Bearer ${n}`}});return{id:e,source:c.source}}function Bt(){return Vt(),Qt(),Gt(),Wt(),Kt()}async function Vt(){const e=document.getElementById("headerToolbar"),t={width:24,height:24,body:'<path fill="currentColor" d="M15.25 0a8.25 8.25 0 0 0-6.18 13.72L1 22.88l1.12 1l8.05-9.12A8.251 8.251 0 1 0 15.25.01V0zm0 15a6.75 6.75 0 1 1 0-13.5a6.75 6.75 0 0 1 0 13.5z"/>'},o=document.createElement("button");o.className="flex items-center text-#8b8685",o.title="Search",o.id="search-button";const r=O(()=>import("../assets/index-BA7OEkeG.js"),__vite__mapDeps([0,1,2]));o.onclick=async()=>{const{openSearch:u}=await r;u()};const n=document.createElement("iconify-icon");n.setAttribute("icon",JSON.stringify(t)),n.setAttribute("height","24"),o.appendChild(n),e.appendChild(o);const i={body:'<path fill-rule="evenodd" clip-rule="evenodd" d="M53 128.8l-16-8.2a192 192 0 1094.7-88.9l7.1 16.6A174 174 0 1153 128.8z" fill="#8b8685"></path> <path d="M94.7 92.3L82 126.5 62.6 95.7l-36.4-1.4 23.3-28-9.9-35.1 33.9 13.5 30.3-20.3-2.4 36.4L130 83.3l-35.3 9z" fill="#d7fc70"></path>',width:416,height:416},c=document.createElement("a");c.className="flex items-center",c.href="https://webring.wonderful.software/#dt.in.th",c.title="วงแหวนเว็บ (webring)";const a=document.createElement("iconify-icon");a.setAttribute("icon",JSON.stringify(i)),a.setAttribute("height","32"),c.appendChild(a),e.appendChild(c)}async function Gt(){de()}async function Wt(){const e=t=>{var o;t.key==="k"&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),(o=document.querySelector("#search-button"))==null||o.click())};document.addEventListener("keydown",e)}async function Qt(){(location.hash==="#og:image"||location.hash==="#og_image")&&document.documentElement.setAttribute("data-screenshot-mode","true")}async function Yt(){Object.assign(window,{global:window,process:{env:{}}});const{Buffer:e}=await O(async()=>{const{Buffer:t}=await import("../assets/index-2iPFC8n8.js");return{Buffer:t}},[]);return Object.assign(window,{Buffer:e}),import(location.origin+"/lib/compiler/index.js")}let re=()=>{};const Xt=q(async()=>{const e=document.querySelector("header a");e&&(e.href="HomePage",e.innerHTML+=' <span class="ml-1 bg-red-400 text-black inline-block align-middle px-1 text-sm rounded font-bold uppercase">Private</span>'),window.addEventListener("keydown",async t=>{t.key==="r"&&re()})});async function k(e,t){b("Loading notes contents...");const o=async()=>t.isPrivate?(Xt(),re=()=>{k(e,t)},Ut(e)):pt(e),{source:r,id:n,compiled:i,compiled_source_version:c,source_version:a}=await o();location.pathname!==`/${n}`&&(location.pathname===`/${e}`||location.pathname==="/")&&history.replaceState({},"",`/${n}`),Zt(n),b("Loading compiler...");const u=new URLSearchParams(location.search);if(i&&c===a&&!u.get("recompile")){b("Running..."),await B(JSON.parse(i)),b("");return}const{compileMarkdown:f}=await Yt();Object.assign(window,{compileMarkdown:f}),b("Compiling...");const s=await f(r,n);b("Running..."),await B(s.compiled),b("")}async function Zt(e){const t=await ht(),o=Dt(t,e),r=Ft(o),n=document.querySelector("breadcrumb-placeholder");n&&(n.outerHTML=r)}async function Kt(){const e=window;if(e.precompiledNoteBehavior)await eo(e.precompiledNoteBehavior,e.precompiledFrontMatter||{});else{const o=location.pathname.match(/^\/(private\/)?([A-Za-z0-9]+)$/);o?await k(o[2],{isPrivate:!!o[1]}):await k("HomePage",{isPrivate:!1})}}async function B(e){document.querySelector("#mainContents").innerHTML=$t(e.html);const t=document.querySelector("#note-styles");t&&t.remove();const o=document.createElement("style");o.id="note-styles",o.innerHTML=e.css,document.head.appendChild(o);const r=document.querySelectorAll("head [data-source='note']");for(const i of r)i.remove();for(const[i,c]of e.head){const a=document.createElement(i);for(const[u,f]of Object.entries(c))a.setAttribute(u,f);a.dataset.source="note",document.head.appendChild(a)}document.title=Ht(e.title);for(const[i,c]of Object.entries(e.dataset))document.documentElement.dataset[i]=c;console.log('This note has been dynamically compiled. To inspect the compiled code, open the console and type "compiled".'),Object.assign(window,{compiled:e}),ne(e.frontMatter);const{hydrate:n}=await O(async()=>{const{hydrate:i}=await import("../assets/index-DKXbdxiG.js");return{hydrate:i}},__vite__mapDeps([3,2,1]));n(e.js,"#noteContents")}async function eo(e,t){ne(t);const{hydrate:o}=await O(async()=>{const{hydrate:r}=await import("../assets/index-DKXbdxiG.js");return{hydrate:r}},__vite__mapDeps([3,2,1]));o(e,"#noteContents")}async function ne(e){console.log("Front matter:",e);const t=document.querySelector("#mainContents"),o=document.createElement("note-footer");o.setAttribute("front-matter",JSON.stringify(e)),t==null||t.appendChild(o)}Bt();export{C as o};
